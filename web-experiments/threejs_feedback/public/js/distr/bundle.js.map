{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./public/js/components/geometry/CapsuleGeometry.js","webpack:///./public/js/entities/Camera.js","webpack:///./public/js/entities/Capsule.js","webpack:///./public/js/entities/CapsuleGrid.js","webpack:///./public/js/entities/PointLight.js","webpack:///./public/js/entities/StandardEntity.js","webpack:///./public/js/main.js","webpack:///./public/js/shaders/feedback.js","webpack:///./public/js/system/FeedbackManager.js","webpack:///./public/js/system/StandardManager.js","webpack:///./public/js/utilities/Capture.js","webpack:///./public/js/utilities/Debug.js","webpack:///./public/js/utilities/EventBus.js","webpack:///./public/js/utilities/OrbitControls.js"],"names":["THREE","CapsuleGeometry","radius","height","N","middleSegments","geometry","Geometry","TWOPI","Math","PI","PID2","normals","i","j","theta","phi","vertex","Vector3","normal","x","cos","y","sin","z","vertices","push","vec","Vector4","face_1","Face3","face_2","w","faces","computeFaceNormals","Camera","aspect","manager","width","useControls","camera","PerspectiveCamera","zoom","focalLength","position","updateProjectionMatrix","setupGUI","setupOrbit","orbitControls","update","gui","addFolder","transform","add","onChange","cam","value","isPerspectiveCamera","setFocalLength","enabled","setupControls","close","renderer","domElement","enableDamping","dampingFactor","minDistance","maxDistance","Capsule","material","MeshNormalMaterial","wireframe","side","DoubleSide","mesh","Mesh","CylinderGrid","resolution","scale","gridspace","modulation","speed","depth","group","Group","capsules","generateGrid","set","scene","rotation","capsule","circum","grid","step","length","remove","open","rot","clock","getElapsedTime","PointLight","intensity","light","lighthelper","PointLightHelper","StandardEntity","MeshBasicMaterial","components","setup","addToScene","addEntity","debug","capturer","stats","verbose","display","framerate","format","workersPath","render","requestAnimationFrame","begin","end","capture","canvas","bindEventListeners","window","addEventListener","onWindowResize","bind","vert","frag","feedback","FeedbackManager","options","background","setClearColor","setupCamera","orthoCamera","OrthographicCamera","setupTargets","mainTarget","WebGLRenderTarget","RGBAFormat","interTarget","outputTarget","setupFeedbackScene","setupOutputScene","feedbackScene","Scene","feedbackUniforms","tex0","texture","tex1","vPoint","name","PlaneBufferGeometry","ShaderMaterial","uniforms","vertexShader","fragmentShader","transparent","quad","outputScene","Color","map","outputQuad","updateEntities","getCamera","tempTarget","asStandardManager","antialias","alpha","innerWidth","innerHeight","entities","GUI","eventBus","Clock","WebGLRenderer","setSize","document","body","appendChild","entity","Capture","template","asDebug","showStats","showGrid","assembleStats","assembleGrid","style","helper","left","bottom","Object","size","divisions","GridHelper","EventCallbacksPair","eventType","callback","callbacks","asEventBus","eventCallbacksPairs","eventCallbacksPair","findEventCallbacksPair","argument1","argument2","console","error","forEach","find","eventObject","OrbitControls","object","undefined","target","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","panningMode","ScreenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ORBIT","MOUSE","ZOOM","MIDDLE","PAN","target0","clone","position0","zoom0","getPolarAngle","spherical","getAzimuthalAngle","saveState","scope","copy","reset","dispatchEvent","changeEvent","state","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","rotateLeft","getAutoRotationAngle","sphericalDelta","max","min","makeSafe","panOffset","setFromSpherical","lookAt","multiplyScalar","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","onKeyDown","type","startEvent","endEvent","ROTATE","DOLLY","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","HorizontalPanning","crossVectors","pan","deltaX","deltaY","element","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","right","clientWidth","top","warn","dollyIn","dollyScale","dollyOut","handleMouseDownRotate","event","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","subVectors","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","keyCode","handleTouchStartRotate","touches","pageX","pageY","handleTouchStartDolly","dx","dy","sqrt","handleTouchStartPan","handleTouchMoveRotate","handleTouchMoveDolly","handleTouchMovePan","handleTouchEnd","preventDefault","button","stopPropagation","prototype","create","EventDispatcher","constructor","defineProperties","center","get","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \tvar installedChunks = {\n \t\t\"main\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"./public/js/main.js\",\"common\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import * as THREE from \"three\";\n\n/*\n  Implemented from a technique described here:\n  http://paulbourke.net/geometry/capsule/\n\n  PID2 taken from Paul Bourke's paulslib.h\n  PID2 = 1.570796326794896619231322;\n\n  ISSUES:\n\n    add ability to add loops in middle segment\n\n  COOL THINGS:\n\n    using a positive PID2 will invert the caps\n*/\n\nconst CapsuleGeometry = (radius = 1, height = 2, N = 32, middleSegments = 1) => {\n  const geometry = new THREE.Geometry();\n  const TWOPI = Math.PI*2;\n\n  const PID2 = 1.570796326794896619231322;\n\n  const normals = [];\n\n  // top cap\n  for(let i = 0; i <= N/4; i++){\n    for(let j = 0; j <= N; j++){\n      let theta = j * TWOPI / N;\n      let phi = -PID2 + Math.PI * i / (N/2);\n      let vertex = new THREE.Vector3();\n      let normal = new THREE.Vector3();\n      vertex.x = radius * Math.cos(phi) * Math.cos(theta);\n      vertex.y = radius * Math.cos(phi) * Math.sin(theta);\n      vertex.z = radius * Math.sin(phi);\n      vertex.z -= height/2;\n      normal.x = vertex.x;\n      normal.y = vertex.y;\n      normal.z = vertex.z;\n      geometry.vertices.push(vertex);\n      normals.push(normal);\n    }\n  }\n\n  // middle segments\n  for(let i = 0; i < middleSegments; i++){\n    for(let j = 0; j <= N; j++){\n      let theta = j * TWOPI / N;\n      let phi = -PID2 + Math.PI * (N/4) / (N/2);\n      let vertex = new THREE.Vector3();\n      let normal = new THREE.Vector3();\n      vertex.x = radius * Math.cos(phi) * Math.cos(theta);\n      vertex.y = radius * Math.cos(phi) * Math.sin(theta);\n      vertex.z = radius * Math.sin(phi);\n      vertex.z += (-height/2) + i * (height/middleSegments);\n      normal.x = vertex.x;\n      normal.y = vertex.y;\n      normal.z = vertex.z;\n      geometry.vertices.push(vertex);\n      normals.push(normal);\n    }\n  }\n\n  // bottom cap\n  for(let i = N/4; i <= N/2; i++){\n    for(let j = 0; j <= N; j++){\n      let theta = j * TWOPI / N;\n      let phi = -PID2 + Math.PI * i / (N/2);\n      let vertex = new THREE.Vector3();\n      let normal = new THREE.Vector3();\n      vertex.x = radius * Math.cos(phi) * Math.cos(theta);\n      vertex.y = radius * Math.cos(phi) * Math.sin(theta);\n      vertex.z = radius * Math.sin(phi);\n      vertex.z += height/2;\n      normal.x = vertex.x;\n      normal.y = vertex.y;\n      normal.z = vertex.z;\n      geometry.vertices.push(vertex);\n      normals.push(normal);\n    }\n  }\n\n  for(let i = 0; i <= (N/2)+middleSegments; i++){\n    for(let j = 0; j < N; j++){\n      let vec = new THREE.Vector4(\n        i         * ( N + 1 ) +   j       ,\n        i         * ( N + 1 ) + ( j + 1 ) ,\n        ( i + 1 ) * ( N + 1 ) + ( j + 1 ) ,\n        ( i + 1 ) * ( N + 1 ) +   j\n      );\n\n      if(i==N/4){\n        let face_1 = new THREE.Face3(vec.x,vec.y,vec.z,[ //ok\n          normals[vec.x],\n          normals[vec.y],\n          normals[vec.z]\n        ]);\n\n        let face_2 = new THREE.Face3(vec.x,vec.z,vec.w,[\n          normals[vec.x],\n          normals[vec.z],\n          normals[vec.w]\n        ]);\n\n        geometry.faces.push(face_2);\n        geometry.faces.push(face_1);\n      }else{\n        let face_1 = new THREE.Face3(vec.x,vec.y,vec.z,[\n          normals[vec.x],\n          normals[vec.y],\n          normals[vec.z]\n        ]);\n\n        let face_2 = new THREE.Face3(vec.x,vec.z,vec.w,[\n          normals[vec.x],\n          normals[vec.z],\n          normals[vec.w]\n        ]);\n\n        geometry.faces.push(face_1);\n        geometry.faces.push(face_2);\n      }\n    }\n  }\n\n  geometry.computeFaceNormals();\n\n  return geometry;\n}\n\nexport default CapsuleGeometry;\n","import * as THREE from \"three\";\nimport StandardEntity from \"./StandardEntity\";\nimport OrbitControls from \"../utilities/OrbitControls.js\";\n\n/*\n  Camera Entity\n*/\n\nexport default class Camera extends StandardEntity{\n\n  setup(){\n    this.aspect = this.manager.width / this.manager.height;\n    this.useControls = true;\n\n    this.camera = new THREE.PerspectiveCamera(\n      75,           // fov\n      this.aspect,  // aspect\n      0.1,          // near\n      1000          // far\n    );\n\n    this.zoom        = 7;\n    // this.focalLength = this.camera.getFocalLength();\n    this.focalLength = 9;\n\n    this.camera.position.z = 2;\n    this.camera.zoom = this.zoom;\n    this.camera.updateProjectionMatrix();\n\n    this.setupGUI();\n    this.setupOrbit();\n  }\n\n  update(){\n    if(this.orbitControls) this.orbitControls.update();\n  }\n\n  setupGUI(){\n    this.gui.camera = this.gui.addFolder('Camera');\n    this.gui.camera.transform = this.gui.camera.addFolder('Transform');\n    this.gui.camera.transform.position = this.gui.camera.transform.addFolder('Position');\n\n    this.gui.camera.transform.position.add(this.camera.position,'x').onChange(()=>{\n      this.cam.updateProjectionMatrix();\n    });\n\n    this.gui.camera.transform.position.add(this.camera.position,'y').onChange(()=>{\n      this.cam.updateProjectionMatrix();\n    });\n\n    this.gui.camera.transform.position.add(this.camera.position,'z').onChange(()=>{\n      this.cam.updateProjectionMatrix();\n    });\n\n    this.gui.camera.add(this,'focalLength',0,150).onChange((value)=>{\n      if(this.camera.isPerspectiveCamera){\n        this.camera.setFocalLength(value);\n      }\n      this.camera.updateProjectionMatrix();\n    });\n\n    this.gui.camera.add(this,'zoom',0,10).onChange((value)=>{\n      this.camera.zoom = value;\n      this.camera.updateProjectionMatrix();\n    });\n\n    this.gui.camera.add(this,'useControls').onChange((value)=>{\n      if(this.orbitControls){\n        this.orbitControls.enabled = value;\n      }else if(value){\n        this.setupControls();\n      }\n    });\n\n    this.gui.camera.close();\n  }\n\n  setupOrbit(){\n    this.orbitControls = new OrbitControls(\n      this.camera,\n      this.manager.renderer.domElement\n    );\n    this.orbitControls.enableDamping = true;\n    this.orbitControls.dampingFactor = 0.8;\n    // this.orbitControls.panningMode = THREE.HorizontalPanning; // default is THREE.ScreenSpacePanning\n    this.orbitControls.minDistance = 0.01;\n    this.orbitControls.maxDistance = 10;\n    // this.orbitControls.maxPolarAngle = Math.PI / 2;\n    // this.orbitControls.autoRotate = true;\n  }\n\n  getCamera(){\n    return this.camera;\n  }\n}\n","import * as THREE from \"three\";\nimport StandardEntity from \"./StandardEntity\";\nimport CapsuleGeometry from \"../components/geometry/CapsuleGeometry.js\";\n\n/*\n  Capsule Entity\n*/\n\nexport default class Capsule extends StandardEntity{\n\n  setup(){\n    this.radius = 1;\n    this.height = 2;\n    this.N = 16;\n    this.middleSegments = 5;\n\n    this.geometry = new CapsuleGeometry(this.radius,this.height,this.N, this.middleSegments);\n    this.material = new THREE.MeshNormalMaterial({wireframe:false, side: THREE.DoubleSide});\n\n    this.mesh = new THREE.Mesh(this.geometry,this.material);\n  }\n\n  update(){}\n}\n","import * as THREE from \"three\";\nimport StandardEntity from \"./StandardEntity\";\nimport Capsule from \"./Capsule\";\n\n//------------------------------------------------------------------------------\nexport default class CylinderGrid extends StandardEntity{\n  setup(){\n    this.resolution = 14;\n    this.scale      = 0.4;\n    this.gridspace  = 0.7;\n    this.wireframe  = false;\n    this.modulation = {\n      speed: 0.1,\n      depth: 0\n    }\n\n    this.group = new THREE.Group();\n    this.capsules  = [];\n\n    this.generateGrid();\n\n    this.group.scale.set(this.scale,this.scale,this.scale);\n\n    this.scene.add(this.group);\n    this.setupGUI();\n\n    this.group.rotation.x = -(Math.PI/4);\n    this.group.rotation.y = -(Math.PI/4);\n  }\n\n  generateGrid(){\n    this.capsules = [];\n\n    for(let x = 0; x < this.resolution; x++){\n      for(let y = 0; y < this.resolution; y++){\n        let capsule = new Capsule(this.manager);\n        let circum = this.scale / (this.resolution - 1);\n\n        capsule.mesh.scale.set(circum/2,circum/2,circum/2);\n\n        capsule.mesh.position.x =\n          (circum * x - this.scale / 2) * (1 + this.gridspace);\n        capsule.mesh.position.y =\n          (circum * y - this.scale / 2) * (1 + this.gridspace);\n\n        capsule.mesh.rotation.z = Math.PI/2;\n\n        this.group.add(capsule.mesh);\n        this.capsules.push(capsule);\n      }\n    }\n  }\n\n  setupGUI(){\n    this.gui.grid = this.gui.addFolder('Capsule Grid');\n\n    this.gui.grid.add(this,'scale',0,10).onChange(()=>{\n      this.group.scale.set(this.scale,this.scale,this.scale);\n    });\n\n    this.gui.grid.add(this,'resolution',0,20).step(1).onChange(()=>{\n      for(let i = 0; i < this.capsules.length; i++){\n        this.group.remove(this.capsules[i].mesh);\n      }\n      this.generateGrid();\n    });\n\n    this.gui.grid.add(this,'gridspace',0,5).onChange(()=>{\n      for(let x = 0, i = 0; x < this.resolution; x++){\n        for(let y = 0; y < this.resolution; y++, i++){\n          let circum = this.scale / (this.resolution - 1);\n\n          this.capsules[i].mesh.position.x =\n            (circum * x - this.scale / 2) * (1 + this.gridspace);\n          this.capsules[i].mesh.position.y =\n            (circum * y - this.scale / 2) * (1 + this.gridspace);\n        }\n      }\n    });\n\n    this.gui.grid.add(this.modulation,'speed');\n    this.gui.grid.add(this.modulation,'depth');\n\n    this.gui.grid.open();\n  }\n\n  update(){\n    let rot = (Math.PI/2) * Math.sin(this.clock.getElapsedTime());\n    this.group.rotation.z = rot;\n\n    for(let x = 0, i = 0; x < this.resolution; x++){\n      for(let y = 0; y < this.resolution; y++, i++){\n        this.capsules[i].mesh.position.z = Math.sin(this.clock.getElapsedTime()*this.modulation.speed+(x*y)) * this.modulation.depth;\n      }\n    }\n\n    let z = Math.sin(this.clock.getElapsedTime()*this.modulation.speed) * this.modulation.depth;\n    this.group.position.z = z;\n  }\n}\n","import * as THREE from \"three\";\nimport StandardEntity from \"./StandardEntity\";\n\n/*\n  PointLight Entity\n*/\n\nexport default class PointLight extends StandardEntity{\n\n  setup(){\n    this.intensity = 1;\n    this.mesh = new THREE.PointLight( 0xffffff, this.intensity );\n    this.mesh.position.set(1,1,1);\n    this.setupGUI();\n    // this.setupHelpers();\n  }\n\n  update(){}\n\n  setupGUI(){\n    this.gui.light = this.gui.addFolder(\"Light\");\n    this.gui.light.add(this.mesh,\"intensity\");\n    this.gui.light.transform = this.gui.light.addFolder(\"Transform\");\n    this.gui.light.transform.add(this.mesh.position,\"x\");\n    this.gui.light.transform.add(this.mesh.position,\"y\");\n    this.gui.light.transform.add(this.mesh.position,\"z\");\n  }\n\n  setupHelpers(){\n    this.lighthelper = new THREE.PointLightHelper( this.mesh, 0.1 );\n    this.scene.add( this.lighthelper );\n  }\n\n}\n","import * as THREE from \"three\";\n\n/*\n  Standard Entity\n*/\n\nexport default class StandardEntity{\n\n  constructor(manager){\n    this.manager = manager;\n    this.clock = manager.clock;\n    this.scene = manager.scene;\n    this.gui = manager.gui;\n\n    this.material = new THREE.MeshBasicMaterial();\n    this.geometry = new THREE.Geometry();\n    this.mesh = new THREE.Mesh();\n\n    this.components = [];\n\n    this.setup();\n    this.addToScene();\n  }\n\n  setup(){}\n\n  update(){}\n\n  addToScene(){\n    this.scene.add(this.mesh);\n    this.manager.addEntity(this);\n  }\n\n}\n","import * as THREE from \"three\";\n\nimport StandardManager from \"./system/StandardManager\";\nimport FeedbackManager from \"./system/FeedbackManager\";\nimport Capture from \"./utilities/Capture\";\nimport Debug from \"./utilities/Debug\";\nimport CapsuleGrid from \"./entities/CapsuleGrid\";\nimport Camera from \"./entities/Camera\";\nimport PointLight from \"./entities/PointLight\";\n\nlet manager, debug, capturer, camera, grid, light;\n\nconst setup = () => {\n  manager = new FeedbackManager();\n\n  grid = new CapsuleGrid(manager);\n\n  light = new PointLight(manager);\n\n  debug = new Debug(manager, {\n    stats: true,\n    grid: false\n  });\n\n  capturer = new Capture(manager, {\n    verbose: false,\n    display: true,\n    framerate: 100,\n    format: 'png',\n    workersPath: 'js/utils/'\n  });\n}\n\nconst render = () => {\n  requestAnimationFrame(render);\n\n  debug.stats.begin();\n  manager.update();\n  debug.stats.end();\n\n  capturer.capture( manager.canvas );\n}\n\nconst bindEventListeners = () => {\n  window.addEventListener(\n    'resize',\n    manager.onWindowResize.bind(manager),\n    false\n  );\n}\n\nsetup();\nbindEventListeners();\nrender();\n","const vert = `\nvarying vec2 vUv;\n\nvoid main()\t{\n    vUv = uv;\n    gl_Position = vec4( position, 1.0 );\n}\n`;\n\nconst frag = `\nuniform sampler2D tex0;\nuniform sampler2D tex1;\nvarying vec2 vUv;\n\nuniform float feedback;\nuniform float scale;\n\nuniform vec2 vPoint;\n\nvoid main(){\n\n    vec4 color;\n\n    vec2 uv = vUv;\n    vec2 uv2 = uv;\n\n    uv2 -= vPoint;\n    uv2 += vPoint/scale;\n    uv2 *= scale;\n\n    vec4 current = texture2D(tex1, uv);\n    vec4 fb = texture2D(tex0, uv2);\n\n    // color = mix(current,fb,feedback);\n    if(current.a == 0.0){\n      color = fb * feedback;\n    }else{\n      color = current;\n    }\n\n    gl_FragColor = color;\n}\n`;\n\nexport { vert, frag }\n","import * as THREE from \"three\";\nimport StandardManager from \"./StandardManager\";\nimport * as feedback from '../shaders/feedback';\n\nexport default class FeedbackManager extends StandardManager{\n  constructor(options){\n    super(options);\n\n    // override background and set renderer clear color for feedback\n    this.scene.background = null;\n    this.renderer.setClearColor(0x000000, 0);\n\n    /*\n      Setup an orthographic camera for rendering-to-texture\n    */\n    const setupCamera = () => {\n      this.orthoCamera = new THREE.OrthographicCamera(\n          this.width / - 2,\n          this.width / 2,\n          this.height / 2,\n          this.height / -2,\n          1,\n          1000\n      );\n\n      this.orthoCamera.position.z = 1;\n    }\n\n    /*\n      Setup all appropriate targets for each stage\n    */\n    const setupTargets = () => {\n      this.mainTarget   = new THREE.WebGLRenderTarget( this.width, this.height, {\n        format: THREE.RGBAFormat\n      });\n      this.interTarget  = new THREE.WebGLRenderTarget( this.width, this.height, {\n        format: THREE.RGBAFormat\n      });\n      this.outputTarget = new THREE.WebGLRenderTarget( this.width, this.height, {\n        format: THREE.RGBAFormat\n      });\n\n      setupFeedbackScene();\n      setupOutputScene();\n    }\n\n    /*\n      The feedback scene is to allow us to render-to-texture.\n    */\n    const setupFeedbackScene = () => {\n      this.feedbackScene = new THREE.Scene();\n\n      this.feedbackUniforms = {\n          tex0: { value: this.interTarget.texture },\n          tex1: { value: this.mainTarget.texture },\n          feedback: { value: 1.0 },\n          scale: { value: 0.961 },\n          vPoint: { value: [0.5,0.5] }\n      };\n \n      this.gui.feedback = this.gui.addFolder('Feedback Shader');\n\n      this.gui.feedback.add(this.feedbackUniforms.feedback,'value',0,1).name('Amount');\n      this.gui.feedback.add(this.feedbackUniforms.scale,'value',0.961).name('Scale').step(0.001);\n      this.gui.feedback.open();\n\n      const geometry = new THREE.PlaneBufferGeometry( 2., 2.);\n      const material = new THREE.ShaderMaterial({\n        uniforms: this.feedbackUniforms,\n        vertexShader: feedback.vert,\n        fragmentShader: feedback.frag,\n        transparent: true\n      });\n\n      const quad = new THREE.Mesh( geometry, material );\n      this.feedbackScene.add( quad );\n    }\n\n    /*\n      The output scene is the final view, upon which we render all\n      prior output upon a simple plane buffer object.\n    */\n    const setupOutputScene = () => {\n      this.outputScene = new THREE.Scene();\n      this.outputScene.background = new THREE.Color( 0x000000 );\n\n      const geometry = new THREE.PlaneBufferGeometry( this.width, this.height );\n      const material = new THREE.MeshBasicMaterial({\n        map: this.outputTarget.texture,\n        transparent: true\n      });\n\n      this.outputQuad = new THREE.Mesh( geometry, material );\n      this.outputScene.add( this.outputQuad );\n    }\n\n    setupCamera();\n    setupTargets();\n  }\n\n  update(){\n    this.updateEntities();\n\n    this.camera.update();\n\n    //render the main scene to the main target\n    this.renderer.render(this.scene, this.camera.getCamera(), this.mainTarget);\n    //render the feedback to the output target\n    this.renderer.render(this.feedbackScene, this.orthoCamera, this.outputTarget);\n\n    //target pingpong\n    let tempTarget = this.interTarget;\n    this.interTarget = this.outputTarget;\n    this.outputTarget = tempTarget;\n\n    this.feedbackUniforms.tex0.value = this.interTarget.texture;\n    this.outputQuad.material.map = this.outputTarget.texture;\n\n    this.renderer.render(this.outputScene, this.orthoCamera);\n  }\n}\n","import * as THREE from \"three\";\nimport Camera from \"../entities/Camera\";\nimport EventBus from \"../utilities/EventBus\";\nimport dat from \"dat.gui\";\n\n/*\n  The StandardTemplate is responsible for maintaining some core elements of\n  Three.\n\n  These include:\n\n  gui\n  eventbus\n  clock\n  scene\n  camera\n    default camera is used, unless separate camera is passed using setCamera()\n  renderer\n  entities\n*/\n\nexport default class asStandardManager{\n  constructor({\n    scene = {\n      background:  \t0x999999\n    },\n    renderer = {\n      antialias: true,\n      alpha: true\n    }\n  }={}){\n    this.width  = window.innerWidth;\n    this.height = window.innerHeight;\n\n    this.entities = [];\n\n    this.gui = new dat.GUI();\n    this.eventBus = new EventBus();\n    this.clock = new THREE.Clock();\n    this.scene = new THREE.Scene();\n    this.scene.background = new THREE.Color( scene.background );\n    this.renderer = new THREE.WebGLRenderer( renderer );\n    this.renderer.setSize(this.width, this.height);\n    this.camera = new Camera(this);\n\n    document.body.appendChild( this.renderer.domElement );\n  }\n\n  setCamera(camera){\n    this.camera = camera;\n    this.camera.updateProjectionMatrix();\n  }\n\n  updateEntities(){\n    for(let i=0; i < this.entities.length; i++){\n      this.entities[i].update();\n    }\n  }\n\n  update(){\n    this.updateEntities();\n    this.renderer.render(this.scene, this.camera.getCamera());\n  }\n\n  addEntity(entity){\n    this.entities.push(entity);\n  }\n\n  onWindowResize(){\n    this.width  = window.innerWidth;\n    this.height = window.innerHeight;\n\n    this.camera.getCamera().aspect = this.width / this.height;\n    this.camera.getCamera().updateProjectionMatrix();\n\n    this.renderer.setSize(this.width, this.height);\n  }\n\n  get canvas(){\n    return this.renderer.domElement;\n  }\n}\n","import CCapture from \"ccapture.js\";\n\nexport default class Capture {\n  constructor (template, options) {\n    this.capturer = new CCapture(options);\n    this.gui = template.gui.addFolder(\"Capture\");\n    this.setup();\n  }\n\n  capture (canvas) {\n    this.capturer.capture(canvas);\n  }\n\n  setup () {\n    this.gui.add(this.capturer, \"start\");\n    this.gui.add(this.capturer, \"stop\");\n    this.gui.add(this.capturer, \"save\");\n  }\n}\n","import * as THREE from \"three\";\nimport Stats from \"stats-js\";\n\nexport default class asDebug{\n  constructor(template, options){\n    this.template = template;\n    this.options = options;\n\n    this.showStats = this.options.stats ? true : false;\n    this.showGrid = this.options.grid ? true : false;\n\n    if(this.showStats) this.assembleStats();\n    if(this.showGrid)  this.assembleGrid();\n\n    this.gui = this.template.gui;\n    this.setupGUI();\n  }\n\n  setupGUI(){\n    this.gui.debug = this.gui.addFolder(\"Debug\");\n    this.gui.debug.add(this,\"showStats\").onChange((value)=>{\n      value ? this.assembleStats() : this.stats.domElement.style.display = 'hidden';\n    });\n\n    this.gui.debug.add(this,\"showGrid\").onChange((value)=>{\n      value ? this.assembleGrid() : this.template.scene.remove(this.grid.helper);\n    });\n  }\n\n  assembleStats(){\n    this.stats = new Stats();\n    this.stats.domElement.style.position = 'absolute';\n    this.stats.domElement.style.left = '0px';\n    this.stats.domElement.style.bottom = '0px';\n    this.stats.domElement.style.display = 'visible';\n    document.body.appendChild( this.stats.domElement );\n  }\n\n  assembleGrid(){\n    this.grid = new Object();\n    this.grid.size = this.options.grid.size || 10;\n    this.grid.divisions = this.options.grid.divisions || 10;\n\n    this.grid.helper = new THREE.GridHelper( this.grid.size, this.grid.divisions );\n    this.template.scene.add( this.grid.helper );\n  }\n}\n","/*\n Based on an implementation described here:\n https://medium.com/@soffritti.pierfrancesco/create-a-simple-event-bus-in-javascript-8aa0370b3969\n*/\n\nfunction EventCallbacksPair( eventType, callback ){\n  this.eventType = eventType;\n  this.callbacks = [callback];\n}\n\nexport default class asEventBus{\n  constructor(){\n    this.eventCallbacksPairs = [];\n  }\n\n  subscribe(eventType, callback){\n    this.eventCallbacksPair = this.findEventCallbacksPair( eventType );\n\n    if(this.eventCallbacksPair){ // if the event exists\n      this.eventCallbacksPair.callbacks.push( callback );\n    }else{ // otherwise, push it into the array\n      this.eventCallbacksPairs.push( new EventCallbacksPair( eventType, callback ));\n    }\n  }\n\n  publish(eventType, argument1, argument2){\n    this.eventCallbacksPair = this.findEventCallbacksPair( eventType );\n\n    if(!this.eventCallbacksPair){\n      console.error(\"no subscribers for event \"+eventType);\n      return;\n    }\n\n    this.eventCallbacksPair.callbacks\n      .forEach( callback => callback(argument1, argument2) );\n  }\n\n  findEventCallbacksPair(eventType){\n    return this.eventCallbacksPairs\n      .find( eventObject => eventObject.eventType === eventType );\n  }\n}\n","import * as THREE from \"three\";\n\n/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n */\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one finger move\n//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n//    Pan - right mouse, or arrow keys / touch: three finger swipe\n\nexport default THREE.OrbitControls = function ( object, domElement ) {\n\n\tthis.object = object;\n\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new THREE.Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.25;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.panSpeed = 1.0;\n\tthis.panningMode = THREE.ScreenSpacePanning; // alternate THREE.HorizontalPanning\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// Set to false to disable use of the keys\n\tthis.enableKeys = true;\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().inverse();\n\n\t\tvar lastPosition = new THREE.Vector3();\n\t\tvar lastQuaternion = new THREE.Quaternion();\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t// restrict theta to be between desired limits\n\t\t\tspherical.theta = Math.max( scope.minAzimuthAngle, Math.min( scope.maxAzimuthAngle, spherical.theta ) );\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\t\t\tscope.target.add( panOffset );\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new THREE.Spherical();\n\tvar sphericalDelta = new THREE.Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new THREE.Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new THREE.Vector2();\n\tvar rotateEnd = new THREE.Vector2();\n\tvar rotateDelta = new THREE.Vector2();\n\n\tvar panStart = new THREE.Vector2();\n\tvar panEnd = new THREE.Vector2();\n\tvar panDelta = new THREE.Vector2();\n\n\tvar dollyStart = new THREE.Vector2();\n\tvar dollyEnd = new THREE.Vector2();\n\tvar dollyDelta = new THREE.Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t}\n\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new THREE.Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tswitch ( scope.panningMode ) {\n\n\t\t\t\tcase THREE.ScreenSpacePanning:\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase THREE.HorizontalPanning:\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\t\tv.crossVectors( scope.object.up, v );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new THREE.Vector3();\n\n\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyIn( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyOut( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\t//console.log( 'handleMouseDownRotate' );\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\t//console.log( 'handleMouseDownDolly' );\n\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\t//console.log( 'handleMouseDownPan' );\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\n\t\t//console.log( 'handleMouseMoveRotate' );\n\n\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );;\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t// rotating across whole screen goes 360 degrees around\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth );\n\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\t//console.log( 'handleMouseMoveDolly' );\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\t//console.log( 'handleMouseMovePan' );\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseUp( event ) {\n\n\t\t// console.log( 'handleMouseUp' );\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n\t\t// console.log( 'handleMouseWheel' );\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\t//console.log( 'handleKeyDown' );\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tscope.update();\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\t//console.log( 'handleTouchStartRotate' );\n\n\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t}\n\n\tfunction handleTouchStartDolly( event ) {\n\n\t\t//console.log( 'handleTouchStartDolly' );\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyStart.set( 0, distance );\n\n\t}\n\n\tfunction handleTouchStartPan( event ) {\n\n\t\t//console.log( 'handleTouchStartPan' );\n\n\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\t//console.log( 'handleTouchMoveRotate' );\n\n\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t// rotating across whole screen goes 360 degrees around\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth );\n\n\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchMoveDolly( event ) {\n\n\t\t//console.log( 'handleTouchMoveDolly' );\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyEnd.set( 0, distance );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchMovePan( event ) {\n\n\t\t//console.log( 'handleTouchMovePan' );\n\n\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleTouchEnd( event ) {\n\n\t\t//console.log( 'handleTouchEnd' );\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onMouseDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase scope.mouseButtons.ORBIT:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\tbreak;\n\n\t\t\tcase scope.mouseButtons.ZOOM:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase scope.mouseButtons.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleMouseUp( event );\n\n\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t\thandleMouseWheel( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\t// one-fingered touch: rotate\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\t// two-fingered touch: dolly\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleTouchStartDolly( event );\n\n\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 3: // three-fingered touch: pan\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchStartPan( event );\n\n\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1: // one-fingered touch: rotate\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return; // is this needed?...\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2: // two-fingered touch: dolly\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_DOLLY ) return; // is this needed?...\n\n\t\t\t\thandleTouchMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 3: // three-fingered touch: pan\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\t\t\t\tif ( state !== STATE.TOUCH_PAN ) return; // is this needed?...\n\n\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleTouchEnd( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\n\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\n\n\twindow.addEventListener( 'keydown', onKeyDown, false );\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nTHREE.OrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\nTHREE.OrbitControls.prototype.constructor = THREE.OrbitControls;\n\nObject.defineProperties( THREE.OrbitControls.prototype, {\n\n\tcenter: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .center has been renamed to .target' );\n\t\t\treturn this.target;\n\n\t\t}\n\n\t},\n\n\t// backward compatibility\n\n\tnoZoom: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\treturn ! this.enableZoom;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\tthis.enableZoom = ! value;\n\n\t\t}\n\n\t},\n\n\tnoRotate: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\treturn ! this.enableRotate;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\tthis.enableRotate = ! value;\n\n\t\t}\n\n\t},\n\n\tnoPan: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\treturn ! this.enablePan;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\tthis.enablePan = ! value;\n\n\t\t}\n\n\t},\n\n\tnoKeys: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\treturn ! this.enableKeys;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\tthis.enableKeys = ! value;\n\n\t\t}\n\n\t},\n\n\tstaticMoving: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\treturn ! this.enableDamping;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\tthis.enableDamping = ! value;\n\n\t\t}\n\n\t},\n\n\tdynamicDampingFactor: {\n\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\treturn this.dampingFactor;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\tthis.dampingFactor = value;\n\n\t\t}\n\n\t}\n\n} );\n\nTHREE.ScreenSpacePanning = 0;\nTHREE.HorizontalPanning = 1;\n"],"sourceRoot":""}