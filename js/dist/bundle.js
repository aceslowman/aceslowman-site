!function(e){function t(t){for(var n,r,s=t[0],l=t[1],d=t[2],f=0,c=[];f<s.length;f++)r=s[f],i[r]&&c.push(i[r][0]),i[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(u&&u(t);c.length;)c.shift()();return o.push.apply(o,d||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,s=1;s<a.length;s++){var l=a[s];0!==i[l]&&(n=!1)}n&&(o.splice(t--,1),e=r(r.s=a[0]))}return e}var n={},i={1:0},o=[];function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=n,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var u=l;o.push([32,0]),a()}([,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0));var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manager=t,this.clock=t.clock,this.scene=t.scene,this.gui=t.gui,this.material=new i.MeshBasicMaterial,this.geometry=new i.Geometry,this.mesh=new i.Mesh,this.components=[],this.setup(),this.addToScene()}return n(e,[{key:"setup",value:function(){}},{key:"update",value:function(){}},{key:"addToScene",value:function(){this.scene.add(this.mesh),this.manager.addEntity(this)}},{key:"onWindowResize",value:function(){}}]),e}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0));t.default=n.Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0));t.default=n.OrbitControls=function(e,t){this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new n.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.panningMode=n.ScreenSpacePanning,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:n.MOUSE.LEFT,ZOOM:n.MOUSE.MIDDLE,PAN:n.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.saveState=function(){a.target0.copy(a.target),a.position0.copy(a.object.position),a.zoom0=a.object.zoom},this.reset=function(){a.target.copy(a.target0),a.object.position.copy(a.position0),a.object.zoom=a.zoom0,a.object.updateProjectionMatrix(),a.dispatchEvent(i),a.update(),l=s.NONE},this.update=function(){var t=new n.Vector3,o=(new n.Quaternion).setFromUnitVectors(e.up,new n.Vector3(0,1,0)),r=o.clone().inverse(),m=new n.Vector3,A=new n.Quaternion;return function(){var e=a.object.position;return t.copy(e).sub(a.target),t.applyQuaternion(o),u.setFromVector3(t),a.autoRotate&&l===s.NONE&&b(2*Math.PI/60/60*a.autoRotateSpeed),u.theta+=f.theta,u.phi+=f.phi,u.theta=Math.max(a.minAzimuthAngle,Math.min(a.maxAzimuthAngle,u.theta)),u.phi=Math.max(a.minPolarAngle,Math.min(a.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=c,u.radius=Math.max(a.minDistance,Math.min(a.maxDistance,u.radius)),a.target.add(h),t.setFromSpherical(u),t.applyQuaternion(r),e.copy(a.target).add(t),a.object.lookAt(a.target),!0===a.enableDamping?(f.theta*=1-a.dampingFactor,f.phi*=1-a.dampingFactor,h.multiplyScalar(1-a.dampingFactor)):(f.set(0,0,0),h.set(0,0,0)),c=1,!!(p||m.distanceToSquared(a.object.position)>d||8*(1-A.dot(a.object.quaternion))>d)&&(a.dispatchEvent(i),m.copy(a.object.position),A.copy(a.object.quaternion),p=!1,!0)}}(),this.dispose=function(){a.domElement.removeEventListener("contextmenu",D,!1),a.domElement.removeEventListener("mousedown",O,!1),a.domElement.removeEventListener("wheel",C,!1),a.domElement.removeEventListener("touchstart",Q,!1),a.domElement.removeEventListener("touchend",R,!1),a.domElement.removeEventListener("touchmove",Y,!1),document.removeEventListener("mousemove",X,!1),document.removeEventListener("mouseup",U,!1),window.removeEventListener("keydown",M,!1)};var a=this,i={type:"change"},o={type:"start"},r={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},l=s.NONE,d=1e-6,u=new n.Spherical,f=new n.Spherical,c=1,h=new n.Vector3,p=!1,m=new n.Vector2,A=new n.Vector2,x=new n.Vector2,F=new n.Vector2,_=new n.Vector2,P=new n.Vector2,g=new n.Vector2,T=new n.Vector2,v=new n.Vector2;function y(){return Math.pow(.95,a.zoomSpeed)}function b(e){f.theta-=e}function E(e){f.phi-=e}var N=function(){var e=new n.Vector3;return function(t,a){e.setFromMatrixColumn(a,0),e.multiplyScalar(-t),h.add(e)}}(),L=function(){var e=new n.Vector3;return function(t,i){switch(a.panningMode){case n.ScreenSpacePanning:e.setFromMatrixColumn(i,1);break;case n.HorizontalPanning:e.setFromMatrixColumn(i,0),e.crossVectors(a.object.up,e)}e.multiplyScalar(t),h.add(e)}}(),S=function(){var e=new n.Vector3;return function(t,n){var i=a.domElement===document?a.domElement.body:a.domElement;if(a.object.isPerspectiveCamera){var o=a.object.position;e.copy(o).sub(a.target);var r=e.length();r*=Math.tan(a.object.fov/2*Math.PI/180),N(2*t*r/i.clientHeight,a.object.matrix),L(2*n*r/i.clientHeight,a.object.matrix)}else a.object.isOrthographicCamera?(N(t*(a.object.right-a.object.left)/a.object.zoom/i.clientWidth,a.object.matrix),L(n*(a.object.top-a.object.bottom)/a.object.zoom/i.clientHeight,a.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),a.enablePan=!1)}}();function I(e){a.object.isPerspectiveCamera?c/=e:a.object.isOrthographicCamera?(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom*e)),a.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function w(e){a.object.isPerspectiveCamera?c*=e:a.object.isOrthographicCamera?(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom/e)),a.object.updateProjectionMatrix(),p=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function O(e){if(!1!==a.enabled){switch(e.preventDefault(),e.button){case a.mouseButtons.ORBIT:if(!1===a.enableRotate)return;!function(e){m.set(e.clientX,e.clientY)}(e),l=s.ROTATE;break;case a.mouseButtons.ZOOM:if(!1===a.enableZoom)return;!function(e){g.set(e.clientX,e.clientY)}(e),l=s.DOLLY;break;case a.mouseButtons.PAN:if(!1===a.enablePan)return;!function(e){F.set(e.clientX,e.clientY)}(e),l=s.PAN}l!==s.NONE&&(document.addEventListener("mousemove",X,!1),document.addEventListener("mouseup",U,!1),a.dispatchEvent(o))}}function X(e){if(!1!==a.enabled)switch(e.preventDefault(),l){case s.ROTATE:if(!1===a.enableRotate)return;!function(e){A.set(e.clientX,e.clientY),x.subVectors(A,m).multiplyScalar(a.rotateSpeed);var t=a.domElement===document?a.domElement.body:a.domElement;b(2*Math.PI*x.x/t.clientWidth),E(2*Math.PI*x.y/t.clientHeight),m.copy(A),a.update()}(e);break;case s.DOLLY:if(!1===a.enableZoom)return;!function(e){T.set(e.clientX,e.clientY),v.subVectors(T,g),v.y>0?I(y()):v.y<0&&w(y()),g.copy(T),a.update()}(e);break;case s.PAN:if(!1===a.enablePan)return;!function(e){_.set(e.clientX,e.clientY),P.subVectors(_,F).multiplyScalar(a.panSpeed),S(P.x,P.y),F.copy(_),a.update()}(e)}}function U(e){!1!==a.enabled&&(document.removeEventListener("mousemove",X,!1),document.removeEventListener("mouseup",U,!1),a.dispatchEvent(r),l=s.NONE)}function C(e){!1===a.enabled||!1===a.enableZoom||l!==s.NONE&&l!==s.ROTATE||(e.preventDefault(),e.stopPropagation(),a.dispatchEvent(o),function(e){e.deltaY<0?w(y()):e.deltaY>0&&I(y()),a.update()}(e),a.dispatchEvent(r))}function M(e){!1!==a.enabled&&!1!==a.enableKeys&&!1!==a.enablePan&&function(e){switch(e.keyCode){case a.keys.UP:S(0,a.keyPanSpeed),a.update();break;case a.keys.BOTTOM:S(0,-a.keyPanSpeed),a.update();break;case a.keys.LEFT:S(a.keyPanSpeed,0),a.update();break;case a.keys.RIGHT:S(-a.keyPanSpeed,0),a.update()}}(e)}function Q(e){if(!1!==a.enabled){switch(e.touches.length){case 1:if(!1===a.enableRotate)return;!function(e){m.set(e.touches[0].pageX,e.touches[0].pageY)}(e),l=s.TOUCH_ROTATE;break;case 2:if(!1===a.enableZoom)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+a*a);g.set(0,n)}(e),l=s.TOUCH_DOLLY;break;case 3:if(!1===a.enablePan)return;!function(e){F.set(e.touches[0].pageX,e.touches[0].pageY)}(e),l=s.TOUCH_PAN;break;default:l=s.NONE}l!==s.NONE&&a.dispatchEvent(o)}}function Y(e){if(!1!==a.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===a.enableRotate)return;if(l!==s.TOUCH_ROTATE)return;!function(e){A.set(e.touches[0].pageX,e.touches[0].pageY),x.subVectors(A,m).multiplyScalar(a.rotateSpeed);var t=a.domElement===document?a.domElement.body:a.domElement;b(2*Math.PI*x.x/t.clientWidth),E(2*Math.PI*x.y/t.clientHeight),m.copy(A),a.update()}(e);break;case 2:if(!1===a.enableZoom)return;if(l!==s.TOUCH_DOLLY)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+n*n);T.set(0,i),v.subVectors(T,g),v.y>0?w(y()):v.y<0&&I(y()),g.copy(T),a.update()}(e);break;case 3:if(!1===a.enablePan)return;if(l!==s.TOUCH_PAN)return;!function(e){_.set(e.touches[0].pageX,e.touches[0].pageY),P.subVectors(_,F).multiplyScalar(a.panSpeed),S(P.x,P.y),F.copy(_),a.update()}(e);break;default:l=s.NONE}}function R(e){!1!==a.enabled&&(a.dispatchEvent(r),l=s.NONE)}function D(e){!1!==a.enabled&&e.preventDefault()}a.domElement.addEventListener("contextmenu",D,!1),a.domElement.addEventListener("mousedown",O,!1),a.domElement.addEventListener("wheel",C,!1),a.domElement.addEventListener("touchstart",Q,!1),a.domElement.addEventListener("touchend",R,!1),a.domElement.addEventListener("touchmove",Y,!1),window.addEventListener("keydown",M,!1),this.update()},n.OrbitControls.prototype=Object.create(n.EventDispatcher.prototype),n.OrbitControls.prototype.constructor=n.OrbitControls,Object.defineProperties(n.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),n.ScreenSpacePanning=0,n.HorizontalPanning=1},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0)),o=(r(a(1)),r(a(3)));function r(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manager=t,this.gui=t.gui,this.setup(),this.active=!0}return n(e,[{key:"setup",value:function(){this.useControls=!0,this.camera=new i.OrthographicCamera(this.manager.width/-2,this.manager.width/2,this.manager.height/2,this.manager.height/-2,.1,2e3),this.zoom=1,this.camera.position.z=1,this.camera.zoom=this.zoom,this.camera.updateProjectionMatrix(),this.setupGUI()}},{key:"update",value:function(){this.orbitControls&&this.orbitControls.update()}},{key:"setupGUI",value:function(){var e=this;this.gui.camera=this.gui.addFolder("OrthoCamera"),this.gui.camera.transform=this.gui.camera.addFolder("Transform"),this.gui.camera.transform.position=this.gui.camera.transform.addFolder("Position"),this.gui.camera.transform.position.add(this.camera.position,"x").onChange(function(){e.camera.updateProjectionMatrix()}),this.gui.camera.transform.position.add(this.camera.position,"y").onChange(function(){e.camera.updateProjectionMatrix()}),this.gui.camera.transform.position.add(this.camera.position,"z").onChange(function(){e.camera.updateProjectionMatrix()}),this.gui.camera.add(this,"zoom",0,10).onChange(function(t){e.camera.zoom=t,e.camera.updateProjectionMatrix()}),this.gui.camera.add(this,"useControls").onChange(function(t){e.orbitControls?e.orbitControls.enabled=t:t&&e.setupControls()}),this.gui.camera.close()}},{key:"setupOrbit",value:function(){this.orbitControls=new o.default(this.camera,this.manager.renderer.domElement),this.orbitControls.enableDamping=!0,this.orbitControls.dampingFactor=.8,this.orbitControls.minDistance=.01,this.orbitControls.maxDistance=1e3,this.orbitControls.enableRotate=!1}},{key:"onWindowResize",value:function(){this.camera.left=-this.manager.width/2,this.camera.right=this.manager.width/2,this.camera.top=this.manager.height/2,this.camera.bottom=-this.manager.height/2,this.camera.updateProjectionMatrix()}},{key:"getCamera",value:function(){return this.camera}}]),e}();t.default=s},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0));t.default=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=new n.Geometry,r=2*Math.PI,s=1.5707963267948966,l=[],d=0;d<=a/4;d++)for(var u=0;u<=a;u++){var f=u*r/a,c=-s+Math.PI*d/(a/2),h=new n.Vector3,p=new n.Vector3;h.x=e*Math.cos(c)*Math.cos(f),h.y=e*Math.cos(c)*Math.sin(f),h.z=e*Math.sin(c),h.z-=t/2,p.x=h.x,p.y=h.y,p.z=h.z,o.vertices.push(h),l.push(p)}for(var m=0;m<i;m++)for(var A=0;A<=a;A++){var x=A*r/a,F=-s+Math.PI*(a/4)/(a/2),_=new n.Vector3,P=new n.Vector3;_.x=e*Math.cos(F)*Math.cos(x),_.y=e*Math.cos(F)*Math.sin(x),_.z=e*Math.sin(F),_.z+=-t/2+m*(t/i),P.x=_.x,P.y=_.y,P.z=_.z,o.vertices.push(_),l.push(P)}for(var g=a/4;g<=a/2;g++)for(var T=0;T<=a;T++){var v=T*r/a,y=-s+Math.PI*g/(a/2),b=new n.Vector3,E=new n.Vector3;b.x=e*Math.cos(y)*Math.cos(v),b.y=e*Math.cos(y)*Math.sin(v),b.z=e*Math.sin(y),b.z+=t/2,E.x=b.x,E.y=b.y,E.z=b.z,o.vertices.push(b),l.push(E)}for(var N=0;N<=a/2+i;N++)for(var L=0;L<a;L++){var S=new n.Vector4(N*(a+1)+L,N*(a+1)+(L+1),(N+1)*(a+1)+(L+1),(N+1)*(a+1)+L);if(N==a/4){var I=new n.Face3(S.x,S.y,S.z,[l[S.x],l[S.y],l[S.z]]),w=new n.Face3(S.x,S.z,S.w,[l[S.x],l[S.z],l[S.w]]);o.faces.push(w),o.faces.push(I)}else{var O=new n.Face3(S.x,S.y,S.z,[l[S.x],l[S.y],l[S.z]]),X=new n.Face3(S.x,S.z,S.w,[l[S.x],l[S.z],l[S.w]]);o.faces.push(O),o.faces.push(X)}}return o.computeFaceNormals(),o}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0)),o=s(a(1)),r=s(a(5));function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),n(t,[{key:"setup",value:function(){this.radius=100,this.height=200,this.N=32,this.middleSegments=5,this.geometry=new r.default(this.radius,this.height,this.N,this.middleSegments),this.material=new i.MeshNormalMaterial({wireframe:!0,side:i.DoubleSide}),this.mesh=new i.Mesh(this.geometry,this.material),this.facehelper=new i.FaceNormalsHelper(this.mesh,.1,16777215,1),this.scene.add(this.facehelper),this.setupGUI()}},{key:"update",value:function(){}},{key:"setupGUI",value:function(){this.gui.capsule=this.gui.addFolder("Capsule"),this.gui.capsule.add(this.material,"wireframe")}}]),t}();t.default=l},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0)),o=function(e){return e&&e.__esModule?e:{default:e}}(a(1));var r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),n(t,[{key:"setup",value:function(){this.textCanvas=document.createElement("canvas"),this.textCanvas.id="textCanvas",this.textCanvas.width=1024,this.textCanvas.height=1024,this.textCtx=this.textCanvas.getContext("2d"),this.textCtx.textAlign="center",this.manager.width<500?this.textCtx.font="110px Times":this.textCtx.font="120px Times",this.textCtx.beginPath(),this.textCtx.rect(0,0,this.textCanvas.width,this.textCanvas.width),this.textCtx.fill(),this.textCtx.lineWidth=1,this.textCtx.fillStyle="white",this.textCtx.fillText("aceslowman",this.textCanvas.width/2,this.textCanvas.width/2),this.textTexture=new i.Texture(this.textCanvas),this.textTexture.needsUpdate=!0,this.geometry=new i.PlaneBufferGeometry(this.manager.width,this.manager.width),this.material=new i.MeshBasicMaterial({map:this.textTexture}),this.mesh=new i.Mesh(this.geometry,this.material),this.manager.scene.add(this.mesh)}},{key:"update",value:function(){}},{key:"onWindowResize",value:function(){console.log("hit")}}]),t}();t.default=r},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0)),o=function(e){return e&&e.__esModule?e:{default:e}}(a(8));var r=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.template=t,this.options=a,this.showStats=!!this.options.stats,this.showGrid=!!this.options.grid,this.showStats&&this.assembleStats(),this.showGrid&&this.assembleGrid(),this.gui=this.template.gui,this.setupGUI()}return n(e,[{key:"setupGUI",value:function(){var e=this;this.gui.debug=this.gui.addFolder("Debug"),this.gui.debug.add(this,"showStats").onChange(function(t){t?e.assembleStats():e.stats.domElement.style.display="hidden"}),this.gui.debug.add(this,"showGrid").onChange(function(t){t?e.assembleGrid():(e.template.scene.remove(e.grid_x.helper),e.template.scene.remove(e.grid_y.helper),e.template.scene.remove(e.grid_z.helper))})}},{key:"assembleStats",value:function(){this.stats=new o.default,this.stats.domElement.style.position="absolute",this.stats.domElement.style.left="0px",this.stats.domElement.style.bottom="0px",this.stats.domElement.style.display="visible",document.body.appendChild(this.stats.domElement)}},{key:"assembleGrid",value:function(){this.grid_x=new Object,this.grid_x.size=this.options.grid.size||10,this.grid_x.divisions=this.options.grid.divisions||10,this.grid_x.helper=new i.GridHelper(this.grid_x.size,this.grid_x.divisions,new i.Color("orange"),new i.Color("red")),this.grid_x.helper.rotation.x=Math.PI/2,this.template.scene.add(this.grid_x.helper),this.grid_y=new Object,this.grid_y.size=this.options.grid.size||10,this.grid_y.divisions=this.options.grid.divisions||10,this.grid_y.helper=new i.GridHelper(this.grid_y.size,this.grid_y.divisions,new i.Color("orange"),new i.Color("green")),this.grid_y.helper.rotation.y=Math.PI/2,this.template.scene.add(this.grid_y.helper),this.grid_z=new Object,this.grid_z.size=this.options.grid.size||10,this.grid_z.divisions=this.options.grid.divisions||10,this.grid_z.helper=new i.GridHelper(this.grid_z.size,this.grid_z.divisions,new i.Color("orange"),new i.Color("blue")),this.grid_z.helper.rotation.z=Math.PI/2,this.template.scene.add(this.grid_z.helper)}}]),e}();t.default=r},,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(a(15));var o=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.capturer=new i.default(a),this.gui=t.gui.addFolder("Capture"),this.setup()}return n(e,[{key:"capture",value:function(e){this.capturer.capture(e)}},{key:"setup",value:function(){this.gui.add(this.capturer,"start"),this.gui.add(this.capturer,"stop"),this.gui.add(this.capturer,"save")}}]),e}();t.default=o},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.vert="\nvarying vec2 texcoord;\n\nvarying vec2 texcoord11;\nvarying vec2 texcoord00;\nvarying vec2 texcoord02;\nvarying vec2 texcoord20;\nvarying vec2 texcoord22;\n\nuniform float width;\n\nvoid main()\n{\n  gl_Position = vec4( position, 1.0 );\n\n  texcoord = uv;\n\n  texcoord11 = texcoord;\n  texcoord00 = texcoord + vec2(-width, -width);\n  texcoord02 = texcoord + vec2( width, -width);\n  texcoord20 = texcoord + vec2( width,  width);\n  texcoord22 = texcoord + vec2(-width,  width);\n}\n",t.frag="\nuniform sampler2D tex0;\n\nvarying vec2 texcoord;\n\nvarying vec2 texcoord11;\nvarying vec2 texcoord00;\nvarying vec2 texcoord02;\nvarying vec2 texcoord20;\nvarying vec2 texcoord22;\n\nvoid main()\n{\n  vec4 s11 = texture2D(tex0, texcoord11);\n  vec4 s00 = texture2D(tex0, texcoord00);\n  vec4 s02 = texture2D(tex0, texcoord02);\n  vec4 s20 = texture2D(tex0, texcoord20);\n  vec4 s22 = texture2D(tex0, texcoord22);\n\n  vec4 sharp = 5.0 * s11 - (s00 + s02 + s20 + s22);\n    vec4 color = texture2D(tex0, texcoord);\n\n  gl_FragColor = sharp;\n}\n"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.vert="\nvarying vec2 vUv;\n\nvoid main()\t{\n    vUv = uv;\n    gl_Position = vec4( position, 1.0 );\n}\n",t.frag="\n// adapted from\n// https://github.com/SableRaf/Filters4Processing/blob/master/sketches/BarrelBlurChroma/data/barrelBlurChroma.glsl\n\nuniform sampler2D tex0;\nvarying vec2 texcoord0;\nvarying vec2 texdim0;\nvarying vec2 vUv;\n\nuniform float power;\nuniform float zoom;\n\nconst int num_iter = 12;\nconst float reci_num_iter_f = 1.0 / float(num_iter);\n\nvec2 barrelDistortion(vec2 coord, float amt) {\n    vec2 cc = coord - 0.5;\n    float dist = dot(cc, cc);\n    return coord + cc * dist * amt;\n}\n\nfloat sat( float t ){\n    return clamp( t, 0.0, 1.0 );\n}\n\nfloat linterp( float t ) {\n    return sat( 1.0 - abs( 2.0*t - 1.0 ) );\n}\n\nfloat remap( float t, float a, float b ) {\n    return sat( (t - a) / (b - a) );\n}\n\nvec3 spectrum_offset( float t ) {\n    vec3 ret;\n    float lo = step(t,0.5);\n    float hi = 1.0-lo;\n    float w = linterp( remap( t, 1.0/6.0, 5.0/6.0 ) );\n    ret = vec3(lo,1.0,hi) * vec3(1.0-w, w, 1.0-w);\n\n    return pow( ret, vec3(1.0/2.2) );\n}\n\nvoid main()\n{\n    vec2 uv = vUv;\n\n    uv -= 0.5;\n    uv += 0.5/zoom;\n    uv *= zoom;\n\n    vec3 sumcol = vec3(0.0);\n    vec3 sumw = vec3(0.0);\n    for ( int i=0; i<num_iter;++i )\n    {\n        float t = float(i) * reci_num_iter_f;\n        vec3 w = spectrum_offset( t );\n        sumw += w;\n        sumcol += w * texture2D( tex0, barrelDistortion(uv, power*t)).rgb;\n    }\n\n    gl_FragColor = vec4(sumcol.rgb / sumw, 1.0);\n}\n"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.vert="\nvarying vec2 vUv;\n\nvoid main()\t{\n    vUv = uv;\n    gl_Position = vec4( position, 1.0 );\n}\n",t.frag="\nuniform sampler2D tex0;\nuniform sampler2D tex1;\nvarying vec2 vUv;\n\nuniform float amount;\nuniform float scale;\n\nuniform vec2 vPoint;\n\nvoid main(){\n\n    vec4 color;\n\n    vec2 uv = vUv;\n    vec2 uv2 = uv;\n\n    uv2 -= vPoint;\n    uv2 += vPoint/scale;\n    uv2 *= scale;\n\n    vec4 current = texture2D(tex1, uv);\n    vec4 fb = texture2D(tex0, uv2);\n    color = current + (fb * amount);\n\n    gl_FragColor = vec4(color.rgb,1.0);\n}\n"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0));t.default=n.FXAAShader={uniforms:{tDiffuse:{value:null},resolution:{value:new n.Vector2(1/1024,1/512)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","","uniform sampler2D tDiffuse;","","uniform vec2 resolution;","","varying vec2 vUv;","","// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)","","//----------------------------------------------------------------------------------","// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag","// SDK Version: v3.00","// Email:       gameworks@nvidia.com","// Site:        http://developer.nvidia.com/","//","// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.","//","// Redistribution and use in source and binary forms, with or without","// modification, are permitted provided that the following conditions","// are met:","//  * Redistributions of source code must retain the above copyright","//    notice, this list of conditions and the following disclaimer.","//  * Redistributions in binary form must reproduce the above copyright","//    notice, this list of conditions and the following disclaimer in the","//    documentation and/or other materials provided with the distribution.","//  * Neither the name of NVIDIA CORPORATION nor the names of its","//    contributors may be used to endorse or promote products derived","//    from this software without specific prior written permission.","//","// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY","// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE","// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR","// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR","// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,","// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,","// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR","// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY","// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT","// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE","// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","//","//----------------------------------------------------------------------------------","","#define FXAA_PC 1","#define FXAA_GLSL_100 1","#define FXAA_QUALITY_PRESET 12","","#define FXAA_GREEN_AS_LUMA 1","","/*--------------------------------------------------------------------------*/","#ifndef FXAA_PC_CONSOLE","    //","    // The console algorithm for PC is included","    // for developers targeting really low spec machines.","    // Likely better to just run FXAA_PC, and use a really low preset.","    //","    #define FXAA_PC_CONSOLE 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_120","    #define FXAA_GLSL_120 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_130","    #define FXAA_GLSL_130 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_3","    #define FXAA_HLSL_3 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_4","    #define FXAA_HLSL_4 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_5","    #define FXAA_HLSL_5 0","#endif","/*==========================================================================*/","#ifndef FXAA_GREEN_AS_LUMA","    //","    // For those using non-linear color,","    // and either not able to get luma in alpha, or not wanting to,","    // this enables FXAA to run using green as a proxy for luma.","    // So with this enabled, no need to pack luma in alpha.","    //","    // This will turn off AA on anything which lacks some amount of green.","    // Pure red and blue or combination of only R and B, will get no AA.","    //","    // Might want to lower the settings for both,","    //    fxaaConsoleEdgeThresholdMin","    //    fxaaQualityEdgeThresholdMin","    // In order to insure AA does not get turned off on colors","    // which contain a minor amount of green.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_GREEN_AS_LUMA 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_EARLY_EXIT","    //","    // Controls algorithm's early exit path.","    // On PS3 turning this ON adds 2 cycles to the shader.","    // On 360 turning this OFF adds 10ths of a millisecond to the shader.","    // Turning this off on console will result in a more blurry image.","    // So this defaults to on.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_EARLY_EXIT 1","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_DISCARD","    //","    // Only valid for PC OpenGL currently.","    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.","    //","    // 1 = Use discard on pixels which don't need AA.","    //     For APIs which enable concurrent TEX+ROP from same surface.","    // 0 = Return unchanged color on pixels which don't need AA.","    //","    #define FXAA_DISCARD 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_FAST_PIXEL_OFFSET","    //","    // Used for GLSL 120 only.","    //","    // 1 = GL API supports fast pixel offsets","    // 0 = do not use fast pixel offsets","    //","    #ifdef GL_EXT_gpu_shader4","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifndef FXAA_FAST_PIXEL_OFFSET","        #define FXAA_FAST_PIXEL_OFFSET 0","    #endif","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GATHER4_ALPHA","    //","    // 1 = API supports gather4 on alpha channel.","    // 0 = API does not support gather4 on alpha channel.","    //","    #if (FXAA_HLSL_5 == 1)","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifndef FXAA_GATHER4_ALPHA","        #define FXAA_GATHER4_ALPHA 0","    #endif","#endif","","","/*============================================================================","                        FXAA QUALITY - TUNING KNOBS","------------------------------------------------------------------------------","NOTE the other tuning knobs are now in the shader function inputs!","============================================================================*/","#ifndef FXAA_QUALITY_PRESET","    //","    // Choose the quality preset.","    // This needs to be compiled into the shader as it effects code.","    // Best option to include multiple presets is to","    // in each shader define the preset, then include this file.","    //","    // OPTIONS","    // -----------------------------------------------------------------------","    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)","    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)","    // 39       - no dither, very expensive","    //","    // NOTES","    // -----------------------------------------------------------------------","    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)","    // 13 = about same speed as FXAA 3.9 and better than 12","    // 23 = closest to FXAA 3.9 visually and performance wise","    //  _ = the lowest digit is directly related to performance","    // _  = the highest digit is directly related to style","    //","    #define FXAA_QUALITY_PRESET 12","#endif","","","/*============================================================================","","                           FXAA QUALITY - PRESETS","","============================================================================*/","","/*============================================================================","                     FXAA QUALITY - MEDIUM DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 10)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 3.0","    #define FXAA_QUALITY_P2 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 11)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 3.0","    #define FXAA_QUALITY_P3 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 12)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 4.0","    #define FXAA_QUALITY_P4 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 13)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 4.0","    #define FXAA_QUALITY_P5 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 14)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 4.0","    #define FXAA_QUALITY_P6 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 15)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 12.0","#endif","","/*============================================================================","                     FXAA QUALITY - LOW DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 20)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 2.0","    #define FXAA_QUALITY_P2 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 21)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 22)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 23)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 24)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 3.0","    #define FXAA_QUALITY_P6 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 25)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 26)","    #define FXAA_QUALITY_PS 9","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 4.0","    #define FXAA_QUALITY_P8 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 27)","    #define FXAA_QUALITY_PS 10","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 4.0","    #define FXAA_QUALITY_P9 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 28)","    #define FXAA_QUALITY_PS 11","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 4.0","    #define FXAA_QUALITY_P10 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 29)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","/*============================================================================","                     FXAA QUALITY - EXTREME QUALITY","============================================================================*/","#if (FXAA_QUALITY_PRESET == 39)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.0","    #define FXAA_QUALITY_P2 1.0","    #define FXAA_QUALITY_P3 1.0","    #define FXAA_QUALITY_P4 1.0","    #define FXAA_QUALITY_P5 1.5","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","","","/*============================================================================","","                                API PORTING","","============================================================================*/","#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)","    #define FxaaBool bool","    #define FxaaDiscard discard","    #define FxaaFloat float","    #define FxaaFloat2 vec2","    #define FxaaFloat3 vec3","    #define FxaaFloat4 vec4","    #define FxaaHalf float","    #define FxaaHalf2 vec2","    #define FxaaHalf3 vec3","    #define FxaaHalf4 vec4","    #define FxaaInt2 ivec2","    #define FxaaSat(x) clamp(x, 0.0, 1.0)","    #define FxaaTex sampler2D","#else","    #define FxaaBool bool","    #define FxaaDiscard clip(-1)","    #define FxaaFloat float","    #define FxaaFloat2 float2","    #define FxaaFloat3 float3","    #define FxaaFloat4 float4","    #define FxaaHalf half","    #define FxaaHalf2 half2","    #define FxaaHalf3 half3","    #define FxaaHalf4 half4","    #define FxaaSat(x) saturate(x)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_100 == 1)","  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)","  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_120 == 1)","    // Requires,","    //  #version 120","    // And at least,","    //  #extension GL_EXT_gpu_shader4 : enable","    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)","    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)","    #if (FXAA_FAST_PIXEL_OFFSET == 1)","        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)","    #else","        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)","    #endif","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_130 == 1)",'    // Requires "#version 130" or better',"    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)","    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_3 == 1)","    #define FxaaInt2 float2","    #define FxaaTex sampler2D","    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))","    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_4 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_5 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)","    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)","    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)","    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)","#endif","","","/*============================================================================","                   GREEN AS LUMA OPTION SUPPORT FUNCTION","============================================================================*/","#if (FXAA_GREEN_AS_LUMA == 0)","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }","#else","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }","#endif","","","","","/*============================================================================","","                             FXAA3 QUALITY - PC","","============================================================================*/","#if (FXAA_PC == 1)","/*--------------------------------------------------------------------------*/","FxaaFloat4 FxaaPixelShader(","    //","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy} = center of pixel","    FxaaFloat2 pos,","    //","    // Used only for FXAA Console, and not used on the 360 version.","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy_} = upper left of pixel","    // {_zw} = lower right of pixel","    FxaaFloat4 fxaaConsolePosPos,","    //","    // Input color texture.","    // {rgb_} = color in linear or perceptual color space","    // if (FXAA_GREEN_AS_LUMA == 0)","    //     {__a} = luma in perceptual color space (not linear)","    FxaaTex tex,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 2nd sampler.","    // This sampler needs to have an exponent bias of -1.","    FxaaTex fxaaConsole360TexExpBiasNegOne,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 3nd sampler.","    // This sampler needs to have an exponent bias of -2.","    FxaaTex fxaaConsole360TexExpBiasNegTwo,","    //","    // Only used on FXAA Quality.","    // This must be from a constant/uniform.","    // {x_} = 1.0/screenWidthInPixels","    // {_y} = 1.0/screenHeightInPixels","    FxaaFloat2 fxaaQualityRcpFrame,","    //","    // Only used on FXAA Console.","    // This must be from a constant/uniform.","    // This effects sub-pixel AA quality and inversely sharpness.","    //   Where N ranges between,","    //     N = 0.50 (default)","    //     N = 0.33 (sharper)","    // {x__} = -N/screenWidthInPixels","    // {_y_} = -N/screenHeightInPixels","    // {_z_} =  N/screenWidthInPixels","    // {__w} =  N/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt,","    //","    // Only used on FXAA Console.","    // Not used on 360, but used on PS3 and PC.","    // This must be from a constant/uniform.","    // {x__} = -2.0/screenWidthInPixels","    // {_y_} = -2.0/screenHeightInPixels","    // {_z_} =  2.0/screenWidthInPixels","    // {__w} =  2.0/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt2,","    //","    // Only used on FXAA Console.","    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.","    // This must be from a constant/uniform.","    // {x__} =  8.0/screenWidthInPixels","    // {_y_} =  8.0/screenHeightInPixels","    // {_z_} = -4.0/screenWidthInPixels","    // {__w} = -4.0/screenHeightInPixels","    FxaaFloat4 fxaaConsole360RcpFrameOpt2,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_SUBPIX define.","    // It is here now to allow easier tuning.","    // Choose the amount of sub-pixel aliasing removal.","    // This can effect sharpness.","    //   1.00 - upper limit (softer)","    //   0.75 - default amount of filtering","    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)","    //   0.25 - almost off","    //   0.00 - completely off","    FxaaFloat fxaaQualitySubpix,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // The minimum amount of local contrast required to apply algorithm.","    //   0.333 - too little (faster)","    //   0.250 - low quality","    //   0.166 - default","    //   0.125 - high quality","    //   0.063 - overkill (slower)","    FxaaFloat fxaaQualityEdgeThreshold,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    //   0.0833 - upper limit (default, the start of visible unfiltered edges)","    //   0.0625 - high quality (faster)","    //   0.0312 - visible limit (slower)","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaQualityEdgeThresholdMin,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only three safe values here: 2 and 4 and 8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // For all other platforms can be a non-power of two.","    //   8.0 is sharper (default!!!)","    //   4.0 is softer","    //   2.0 is really soft (good only for vector graphics inputs)","    FxaaFloat fxaaConsoleEdgeSharpness,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only two safe values here: 1/4 and 1/8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // The console setting has a different mapping than the quality setting.","    // Other platforms can use other values.","    //   0.125 leaves less aliasing, but is softer (default!!!)","    //   0.25 leaves more aliasing, and is sharper","    FxaaFloat fxaaConsoleEdgeThreshold,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    // The console setting has a different mapping than the quality setting.","    // This only applies when FXAA_EARLY_EXIT is 1.","    // This does not apply to PS3,","    // PS3 was simplified to avoid more shader instructions.","    //   0.06 - faster but more aliasing in darks","    //   0.05 - default","    //   0.04 - slower and less aliasing in darks","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaConsoleEdgeThresholdMin,","    //","    // Extra constants for 360 FXAA Console only.","    // Use zeros or anything else for other platforms.","    // These must be in physical constant registers and NOT immedates.","    // Immedates will result in compiler un-optimizing.","    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)","    FxaaFloat4 fxaaConsole360ConstDir",") {","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posM;","    posM.x = pos.x;","    posM.y = pos.y;","    #if (FXAA_GATHER4_ALPHA == 1)","        #if (FXAA_DISCARD == 0)","            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","            #if (FXAA_GREEN_AS_LUMA == 0)","                #define lumaM rgbyM.w","            #else","                #define lumaM rgbyM.y","            #endif","        #endif","        #if (FXAA_GREEN_AS_LUMA == 0)","            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));","        #else","            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));","        #endif","        #if (FXAA_DISCARD == 1)","            #define lumaM luma4A.w","        #endif","        #define lumaE luma4A.z","        #define lumaS luma4A.x","        #define lumaSE luma4A.y","        #define lumaNW luma4B.w","        #define lumaN luma4B.z","        #define lumaW luma4B.x","    #else","        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","        #if (FXAA_GREEN_AS_LUMA == 0)","            #define lumaM rgbyM.w","        #else","            #define lumaM rgbyM.y","        #endif","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));","        #endif","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat maxSM = max(lumaS, lumaM);","    FxaaFloat minSM = min(lumaS, lumaM);","    FxaaFloat maxESM = max(lumaE, maxSM);","    FxaaFloat minESM = min(lumaE, minSM);","    FxaaFloat maxWN = max(lumaN, lumaW);","    FxaaFloat minWN = min(lumaN, lumaW);","    FxaaFloat rangeMax = max(maxWN, maxESM);","    FxaaFloat rangeMin = min(minWN, minESM);","    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;","    FxaaFloat range = rangeMax - rangeMin;","    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);","    FxaaBool earlyExit = range < rangeMaxClamped;","/*--------------------------------------------------------------------------*/","    if(earlyExit)","        #if (FXAA_DISCARD == 1)","            FxaaDiscard;","        #else","            return rgbyM;","        #endif","/*--------------------------------------------------------------------------*/","    #if (FXAA_GATHER4_ALPHA == 0)","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","        #endif","    #else","        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));","        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNS = lumaN + lumaS;","    FxaaFloat lumaWE = lumaW + lumaE;","    FxaaFloat subpixRcpRange = 1.0/range;","    FxaaFloat subpixNSWE = lumaNS + lumaWE;","    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;","    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNESE = lumaNE + lumaSE;","    FxaaFloat lumaNWNE = lumaNW + lumaNE;","    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;","    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNWSW = lumaNW + lumaSW;","    FxaaFloat lumaSWSE = lumaSW + lumaSE;","    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);","    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);","    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;","    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;","    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;","    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;","/*--------------------------------------------------------------------------*/","    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;","    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;","    FxaaBool horzSpan = edgeHorz >= edgeVert;","    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;","/*--------------------------------------------------------------------------*/","    if(!horzSpan) lumaN = lumaW;","    if(!horzSpan) lumaS = lumaE;","    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;","    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;","/*--------------------------------------------------------------------------*/","    FxaaFloat gradientN = lumaN - lumaM;","    FxaaFloat gradientS = lumaS - lumaM;","    FxaaFloat lumaNN = lumaN + lumaM;","    FxaaFloat lumaSS = lumaS + lumaM;","    FxaaBool pairN = abs(gradientN) >= abs(gradientS);","    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));","    if(pairN) lengthSign = -lengthSign;","    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posB;","    posB.x = posM.x;","    posB.y = posM.y;","    FxaaFloat2 offNP;","    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;","    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;","    if(!horzSpan) posB.x += lengthSign * 0.5;","    if( horzSpan) posB.y += lengthSign * 0.5;","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posN;","    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;","    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;","    FxaaFloat2 posP;","    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;","    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;","    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;","    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));","    FxaaFloat subpixE = subpixC * subpixC;","    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));","/*--------------------------------------------------------------------------*/","    if(!pairN) lumaNN = lumaSS;","    FxaaFloat gradientScaled = gradient * 1.0/4.0;","    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;","    FxaaFloat subpixF = subpixD * subpixE;","    FxaaBool lumaMLTZero = lumaMM < 0.0;","/*--------------------------------------------------------------------------*/","    lumaEndN -= lumaNN * 0.5;","    lumaEndP -= lumaNN * 0.5;","    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;","    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;","    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;","    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;","    FxaaBool doneNP = (!doneN) || (!doneP);","    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;","    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;","/*--------------------------------------------------------------------------*/","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 3)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 4)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 5)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 6)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;","/*--------------------------------------------------------------------------*/","                        #if (FXAA_QUALITY_PS > 7)","                        if(doneNP) {","                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                            doneN = abs(lumaEndN) >= gradientScaled;","                            doneP = abs(lumaEndP) >= gradientScaled;","                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;","                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;","                            doneNP = (!doneN) || (!doneP);","                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;","                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;","/*--------------------------------------------------------------------------*/","    #if (FXAA_QUALITY_PS > 8)","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 9)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 10)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 11)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 12)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","    #endif","/*--------------------------------------------------------------------------*/","                        }","                        #endif","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","/*--------------------------------------------------------------------------*/","    FxaaFloat dstN = posM.x - posN.x;","    FxaaFloat dstP = posP.x - posM.x;","    if(!horzSpan) dstN = posM.y - posN.y;","    if(!horzSpan) dstP = posP.y - posM.y;","/*--------------------------------------------------------------------------*/","    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;","    FxaaFloat spanLength = (dstP + dstN);","    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;","    FxaaFloat spanLengthRcp = 1.0/spanLength;","/*--------------------------------------------------------------------------*/","    FxaaBool directionN = dstN < dstP;","    FxaaFloat dst = min(dstN, dstP);","    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;","    FxaaFloat subpixG = subpixF * subpixF;","    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;","    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;","/*--------------------------------------------------------------------------*/","    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;","    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);","    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;","    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;","    #if (FXAA_DISCARD == 1)","        return FxaaTexTop(tex, posM);","    #else","        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);","    #endif","}","/*==========================================================================*/","#endif","","void main() {","  gl_FragColor = FxaaPixelShader(","    vUv,","    vec4(0.0),","    tDiffuse,","    tDiffuse,","    tDiffuse,","    resolution,","    vec4(0.0),","    vec4(0.0),","    vec4(0.0),","    0.75,","    0.166,","    0.0833,","    0.0,","    0.0,","    0.0,","    vec4(0.0)","  );","","  // TODO avoid querying texture twice for same texel","  gl_FragColor.a = texture2D(tDiffuse, vUv).a;","}"].join("\n")}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0));t.default=n.TexturePass=function(e,t){n.Pass.call(this),void 0===n.CopyShader&&console.error("THREE.TexturePass relies on THREE.CopyShader");var a=n.CopyShader;this.map=e,this.opacity=void 0!==t?t:1,this.uniforms=n.UniformsUtils.clone(a.uniforms),this.material=new n.ShaderMaterial({uniforms:this.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,depthTest:!1,depthWrite:!1}),this.needsSwap=!1,this.camera=new n.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new n.Scene,this.quad=new n.Mesh(new n.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},n.TexturePass.prototype=Object.assign(Object.create(n.Pass.prototype),{constructor:n.TexturePass,render:function(e,t,a,n,i){var o=e.autoClear;e.autoClear=!1,this.quad.material=this.material,this.uniforms.opacity.value=this.opacity,this.uniforms.tDiffuse.value=this.map,this.material.transparent=this.opacity<1,e.render(this.scene,this.camera,this.renderToScreen?null:a,this.clear),e.autoClear=o}})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0));t.default=n.RenderPass=function(e,t,a,i,o){n.Pass.call(this),this.scene=e,this.camera=t,this.overrideMaterial=a,this.clearColor=i,this.clearAlpha=void 0!==o?o:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1},n.RenderPass.prototype=Object.assign(Object.create(n.Pass.prototype),{constructor:n.RenderPass,render:function(e,t,a,n,i){var o,r,s=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(o=e.getClearColor().getHex(),r=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.render(this.scene,this.camera,this.renderToScreen?null:a,this.clear),this.clearColor&&e.setClearColor(o,r),this.scene.overrideMaterial=null,e.autoClear=s}})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0));t.default=n.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0));a(2);t.default=n.ShaderPass=function(e,t){n.Pass.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof n.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=n.UniformsUtils.clone(e.uniforms),this.material=new n.ShaderMaterial({defines:e.defines||{},uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.camera=new n.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new n.Scene,this.quad=new n.Mesh(new n.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},n.ShaderPass.prototype=Object.assign(Object.create(n.Pass.prototype),{constructor:n.ShaderPass,render:function(e,t,a,n,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=a.texture),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0));a(2),a(24),a(23);t.default=n.EffectComposer=function(e,t){if(this.renderer=e,void 0===t){var a={minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat,stencilBuffer:!1},i=e.getDrawingBufferSize();(t=new n.WebGLRenderTarget(i.width,i.height,a)).texture.name="EffectComposer.rt1"}this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===n.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),void 0===n.ShaderPass&&console.error("THREE.EffectComposer relies on THREE.ShaderPass"),this.copyPass=new n.ShaderPass(n.CopyShader)},Object.assign(n.EffectComposer.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e);var t=this.renderer.getDrawingBufferSize();e.setSize(t.width,t.height)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(e){var t,a,i=!1,o=this.passes.length;for(a=0;a<o;a++)if(!1!==(t=this.passes[a]).enabled){if(t.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),t.needsSwap){if(i){var r=this.renderer.context;r.stencilFunc(r.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),r.stencilFunc(r.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==n.MaskPass&&(t instanceof n.MaskPass?i=!0:t instanceof n.ClearMaskPass&&(i=!1))}},reset:function(e){if(void 0===e){var t=this.renderer.getDrawingBufferSize();(e=this.renderTarget1.clone()).setSize(t.width,t.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this.renderTarget1.setSize(e,t),this.renderTarget2.setSize(e,t);for(var a=0;a<this.passes.length;a++)this.passes[a].setSize(e,t)}}),Object.assign(n.Pass.prototype,{setSize:function(e,t){},render:function(e,t,a,n,i){console.error("THREE.Pass: .render() must be implemented in derived pass.")}})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=l(a(0)),o=(a(25),a(22),a(21),a(20),l(a(19))),r=l(a(18)),s=l(a(17));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}var d=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manager=t,this.spareTarget=new i.WebGLRenderTarget(this.width,this.height,{format:i.RGBAFormat}),this.inputTarget=new i.WebGLRenderTarget(this.width,this.height,{format:i.RGBAFormat}),this.feedbackTarget=new i.WebGLRenderTarget(this.width,this.height,{format:i.RGBAFormat}),this.intermediateTarget=new i.WebGLRenderTarget(this.width,this.height,{format:i.RGBAFormat}),this.finalTarget=new i.WebGLRenderTarget(this.width,this.height,{format:i.RGBAFormat}),this.setupInputComposer(),this.setupFeedbackComposer(),this.setupIntermediateComposer(),this.setupFinalComposer(),this.manager.gui.feedback=this.manager.gui.addFolder("Feedback Shader"),this.manager.gui.feedback.add(this.shader_feedback.uniforms.amount,"value",0,1).name("Amount"),this.manager.gui.feedback.add(this.shader_feedback.uniforms.scale,"value",0,2).name("Scale"),this.manager.gui.feedback.open(),this.manager.gui.sharpen=this.manager.gui.addFolder("Sharpen Shader"),this.manager.gui.sharpen.add(this.shader_sharpen.uniforms.width,"value",0,.5).name("Width"),this.manager.gui.sharpen.open(),this.manager.gui.barrel=this.manager.gui.addFolder("Barrel Shader"),this.manager.gui.barrel.add(this.shader_chroma.uniforms.power,"value",-1,1).name("Power"),this.manager.gui.barrel.open()}return n(e,[{key:"setupInputComposer",value:function(){this.inputComposer=new i.EffectComposer(this.manager.renderer,this.inputTarget),this.inputComposer.setSize(this.manager.width,this.manager.height);var e=new i.RenderPass(this.manager.scene,this.manager.camera.getCamera());this.inputComposer.addPass(e)}},{key:"setupFeedbackComposer",value:function(){this.feedbackComposer=new i.EffectComposer(this.manager.renderer,this.feedbackTarget),this.feedbackComposer.setSize(this.manager.width,this.manager.height),this.shader_feedback=new i.ShaderMaterial({uniforms:{tex0:{value:this.intermediateTarget.texture},tex1:{value:this.inputTarget.texture},amount:{value:.81},scale:{value:.991},vPoint:{value:[.5,.6]}},vertexShader:o.vert,fragmentShader:o.frag});var e=new i.ShaderPass(this.shader_feedback,"feedback");this.feedbackComposer.addPass(e)}},{key:"setupIntermediateComposer",value:function(){this.intermediateComposer=new i.EffectComposer(this.manager.renderer,this.intermediateTarget),this.intermediateComposer.setSize(this.manager.width,this.manager.height),this.shader_sharpen=new i.ShaderMaterial({uniforms:{width:{value:.01}},vertexShader:s.vert,fragmentShader:s.frag});var e=new i.TexturePass(this.feedbackTarget.texture,1),t=new i.ShaderPass(this.shader_sharpen,"sharpen");this.intermediateComposer.addPass(e),this.intermediateComposer.addPass(t)}},{key:"setupFinalComposer",value:function(){this.finalComposer=new i.EffectComposer(this.manager.renderer,this.finalTarget),this.finalComposer.setSize(this.manager.width,this.manager.height),this.shader_chroma=new i.ShaderMaterial({uniforms:{power:{value:0},zoom:{value:1}},vertexShader:r.vert,fragmentShader:r.frag});var e=new i.TexturePass(this.intermediateTarget.texture,1),t=new i.ShaderPass(this.shader_chroma,"chroma");void 0!==window.devicePixelRatio&&window.devicePixelRatio,t.renderToScreen=!0,this.finalComposer.addPass(e),this.finalComposer.addPass(t)}},{key:"render",value:function(e){this.inputComposer.render(e),this.inputComposer.swapBuffers(),this.feedbackComposer.render(e),this.intermediateComposer.render(e),this.intermediateComposer.swapBuffers();var t=this.spareTarget;this.spareTarget=this.intermediateTarget,this.intermediateTarget=t,this.finalComposer.render(e)}},{key:"update",value:function(){}}]),e}();t.default=d},,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventCallbacksPairs=[]}return n(e,[{key:"subscribe",value:function(e,t){this.eventCallbacksPair=this.findEventCallbacksPair(e),this.eventCallbacksPair?this.eventCallbacksPair.callbacks.push(t):this.eventCallbacksPairs.push(new function(e,t){this.eventType=e,this.callbacks=[t]}(e,t))}},{key:"publish",value:function(e,t,a){this.eventCallbacksPair=this.findEventCallbacksPair(e),this.eventCallbacksPair?this.eventCallbacksPair.callbacks.forEach(function(e){return e(t,a)}):console.error("no subscribers for event "+e)}},{key:"findEventCallbacksPair",value:function(e){return this.eventCallbacksPairs.find(function(t){return t.eventType===e})}}]),e}();t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0)),o=(r(a(1)),r(a(3)));function r(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manager=t,this.setup()}return n(e,[{key:"setup",value:function(){this.aspect=this.manager.width/this.manager.height,this.useControls=!0,this.camera=new i.PerspectiveCamera(75,this.aspect,.01,2e3),this.zoom=2,this.focalLength=this.camera.getFocalLength(),this.camera.position.z=999,this.camera.zoom=this.zoom,this.camera.updateProjectionMatrix(),this.setupOrbit()}},{key:"update",value:function(){this.orbitControls&&this.orbitControls.update()}},{key:"setupGUI",value:function(){var e=this;this.gui.camera=this.gui.addFolder("Camera"),this.gui.camera.transform=this.gui.camera.addFolder("Transform"),this.gui.camera.transform.position=this.gui.camera.transform.addFolder("Position"),this.gui.camera.transform.position.add(this.camera.position,"x").onChange(function(){e.cam.updateProjectionMatrix()}),this.gui.camera.transform.position.add(this.camera.position,"y").onChange(function(){e.cam.updateProjectionMatrix()}),this.gui.camera.transform.position.add(this.camera.position,"z").onChange(function(){e.cam.updateProjectionMatrix()}),this.gui.camera.add(this,"focalLength",0,150).onChange(function(t){e.camera.isPerspectiveCamera&&e.camera.setFocalLength(t),e.camera.updateProjectionMatrix()}),this.gui.camera.add(this,"zoom",0,10).onChange(function(t){e.camera.zoom=t,e.camera.updateProjectionMatrix()}),this.gui.camera.add(this,"useControls").onChange(function(t){e.orbitControls?e.orbitControls.enabled=t:t&&e.setupControls()}),this.gui.camera.close()}},{key:"setupOrbit",value:function(){this.orbitControls=new o.default(this.camera,this.manager.renderer.domElement),this.orbitControls.enableDamping=!0,this.orbitControls.dampingFactor=.8,this.orbitControls.minDistance=.1,this.orbitControls.maxDistance=1e3}},{key:"onWindowResize",value:function(){this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix()}},{key:"getCamera",value:function(){return this.camera}}]),e}();t.default=s},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0)),o=l(a(29)),r=l(a(28)),s=l(a(27));function l(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.scene,n=void 0===a?{background:0}:a,l=t.renderer,d=void 0===l?{antialias:!0}:l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.width=window.innerWidth,this.height=window.innerHeight,this.entities=[],this.gui=new s.default.GUI,this.eventBus=new r.default,this.clock=new i.Clock,this.renderer=new i.WebGLRenderer(d),this.renderer.setSize(this.width,this.height),document.body.appendChild(this.renderer.domElement),this.scene=new i.Scene,this.scene.background=new i.Color(n.background),this.overScene=new i.Scene,this.camera=new o.default(this),this.ortho=new i.OrthographicCamera(this.width/-2,this.width/2,this.height/2,this.height/-2,1,1e3),this.ortho.position.z=1}return n(e,[{key:"setCamera",value:function(e){this.camera=e}},{key:"updateEntities",value:function(){for(var e=0;e<this.entities.length;e++)this.entities[e].update()}},{key:"update",value:function(){this.updateEntities()}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera.getCamera()),this.renderer.render(this.overScene,this.ortho)}},{key:"addEntity",value:function(e){this.entities.push(e)}},{key:"onWindowResize",value:function(){for(var e=0;e<this.entities.length;e++)this.entities[e].onWindowResize();this.width=window.innerWidth,this.height=window.innerHeight,this.camera.onWindowResize(),this.renderer.setSize(this.width,this.height)}},{key:"canvas",get:function(){return this.renderer.domElement}}]),e}();t.default=d},,function(e,t,a){"use strict";(function(e){!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);t.default=e}(a(0));var t=l(a(30)),n=l(a(26)),i=l(a(16)),o=l(a(9)),r=l(a(7)),s=(l(a(6)),l(a(4)));function l(e){return e&&e.__esModule?e:{default:e}}var d=void 0,u=void 0,f=void 0,c=void 0,h=void 0,p=function(e){var t=e.clientX/window.innerWidth,a=e.clientY/window.innerHeight;h.shader_feedback.uniforms.vPoint.value[0]=t,h.shader_feedback.uniforms.vPoint.value[1]=a};d=new t.default,e.env.DEVELOPMENT||d.gui.__proto__.constructor.toggleHide(),c=new s.default(d),d.setCamera(c),new r.default(d),h=new n.default(d),e.env.DEVELOPMENT&&(u=new o.default(d,{stats:!0,grid:!1}),f=new i.default(d,{verbose:!1,display:!0,framerate:100,format:"png",workersPath:"js/utils/"})),window.addEventListener("resize",d.onWindowResize.bind(d),!1),window.addEventListener("mousemove",p,!1),function t(){requestAnimationFrame(t),e.env.DEVELOPMENT&&u.stats.begin(),d.update(),h.render(),e.env.DEVELOPMENT&&u.stats.end(),e.env.DEVELOPMENT&&f.capture(d.canvas)}()}).call(this,a(31))}]);