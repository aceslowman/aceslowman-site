<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="google-site-verification" content="Aeq8TmiyVZfEih-VwFJcC0obVElZ8zVcFt9kJQAHL-4" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="theme-color" content="#000000">
    <!--
      manifest.json provides metadata used when your web app is added to the
      homescreen on Android. See https://developers.google.com/web/fundamentals/engage-and-retain/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json">
    <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico">
    <style>
        canvas{
            display:block;
            position:fixed;
            top:0;
            left:0;
            z-index:-100;
        }

        body{
          padding:0px;
          margin:0px;
        }
    </style>
    <title>aceslowman</title>
  </head>
  <body>
    <noscript>
      You need to enable JavaScript to run this app.
    </noscript>
    <div id="root"></div>






    <script id="vertexShader" type="x-shader/x-vertex">
        varying vec2 vUv;

        void main()	{
            vUv = uv;
            gl_Position = vec4( position, 1.0 );
        }
    </script>

    <script id="fragmentShader" type="x-shader/x-fragment">
        #define KERNEL_SIZE 9

        uniform sampler2D tex0;
        uniform sampler2D tex1;
        varying vec2 vUv;

        float kernel[KERNEL_SIZE];
        vec2 offset[KERNEL_SIZE];

        void setupKernel(){
            vec2 src_tex_offset0 = vec2(0.0009, 0.0009);

            offset[0] = vec2(-src_tex_offset0.s, -src_tex_offset0.t);
            offset[1] = vec2(0.0, -src_tex_offset0.t);
            offset[2] = vec2(src_tex_offset0.s, -src_tex_offset0.t);

            offset[3] = vec2(-src_tex_offset0.s, 0.0);
            offset[4] = vec2(0.0, 0.0);
            offset[5] = vec2(src_tex_offset0.s, 0.0);

            offset[6] = vec2(-src_tex_offset0.s, src_tex_offset0.t);
            offset[7] = vec2(0.0, src_tex_offset0.t);
            offset[8] = vec2(src_tex_offset0.s, src_tex_offset0.t);

            kernel[0] = -1.0;   kernel[1] = -1.0;   kernel[2] = -1.0;
            kernel[3] = -1.0;   kernel[4] = +9.0;   kernel[5] = -1.0;
            kernel[6] = -1.0;   kernel[7] = -1.0;   kernel[8] = -1.0;
        }

        void main(){

            //move to uniforms
            //===================
            float feedback = 0.99;
            float scale = 0.97;
            //===================

            vec4 color;

            vec2 uv = vUv;
            vec2 uv2 = uv;

		    uv2 -= 0.5;
	        uv2 += 0.5/scale;
			uv2 *= scale;

            vec4 fb = vec4(0.0);
            vec4 current = vec4(0.0);
            vec4 tmp;

            setupKernel();

            for(int i = 0; i < KERNEL_SIZE; i++){
                tmp = texture2D(tex1, uv + offset[i]);
                current += tmp * kernel[i];
            }

            fb = texture2D(tex0, uv2);
            color = current + (fb * feedback);

            gl_FragColor = vec4(color.rgb,1.0);
        }
    </script>








    <script src="%PUBLIC_URL%/js/three.min.js" type="text/javascript"></script>
    <script src="%PUBLIC_URL%/js/script.js" type="text/javascript"></script>
  </body>
</html>
