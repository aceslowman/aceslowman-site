!function(e){function t(t){for(var o,a,s=t[0],u=t[1],c=t[2],h=0,d=[];h<s.length;h++)a=s[h],i[a]&&d.push(i[a][0]),i[a]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);for(l&&l(t);d.length;)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,s=1;s<n.length;s++){var u=n[s];0!==i[u]&&(o=!1)}o&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},i={1:0},r=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=u;r.push([22,0]),n()}([,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manager=t,this.clock=t.clock,this.scene=t.scene,this.gui=t.gui,this.material=new i.MeshBasicMaterial,this.geometry=new i.Geometry,this.mesh=new i.Mesh,this.components=[],this.setup(),this.addToScene()}return o(e,[{key:"setup",value:function(){}},{key:"update",value:function(){}},{key:"addToScene",value:function(){this.scene.add(this.mesh),this.manager.addEntity(this)}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),r=s(n(1)),a=s(n(21));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),o(t,[{key:"setup",value:function(){this.aspect=this.manager.width/this.manager.height,this.useControls=!0,this.camera=new i.PerspectiveCamera(75,this.aspect,.1,1e3),this.zoom=7,this.focalLength=9,this.camera.position.z=2,this.camera.zoom=this.zoom,this.camera.updateProjectionMatrix(),this.setupGUI(),this.setupOrbit()}},{key:"update",value:function(){this.orbitControls&&this.orbitControls.update()}},{key:"setupGUI",value:function(){var e=this;this.gui.camera=this.gui.addFolder("Camera"),this.gui.camera.transform=this.gui.camera.addFolder("Transform"),this.gui.camera.transform.position=this.gui.camera.transform.addFolder("Position"),this.gui.camera.transform.position.add(this.camera.position,"x").onChange(function(){e.cam.updateProjectionMatrix()}),this.gui.camera.transform.position.add(this.camera.position,"y").onChange(function(){e.cam.updateProjectionMatrix()}),this.gui.camera.transform.position.add(this.camera.position,"z").onChange(function(){e.cam.updateProjectionMatrix()}),this.gui.camera.add(this,"focalLength",0,150).onChange(function(t){e.camera.isPerspectiveCamera&&e.camera.setFocalLength(t),e.camera.updateProjectionMatrix()}),this.gui.camera.add(this,"zoom",0,10).onChange(function(t){e.camera.zoom=t,e.camera.updateProjectionMatrix()}),this.gui.camera.add(this,"useControls").onChange(function(t){e.orbitControls?e.orbitControls.enabled=t:t&&e.setupControls()}),this.gui.camera.close()}},{key:"setupOrbit",value:function(){this.orbitControls=new a.default(this.camera,this.manager.renderer.domElement),this.orbitControls.enableDamping=!0,this.orbitControls.dampingFactor=.8,this.orbitControls.minDistance=.01,this.orbitControls.maxDistance=10}},{key:"getCamera",value:function(){return this.camera}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),r=u(n(2)),a=u(n(20)),s=u(n(19));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.scene,o=void 0===n?{background:10066329}:n,u=t.renderer,c=void 0===u?{antialias:!0,alpha:!0}:u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.width=window.innerWidth,this.height=window.innerHeight,this.entities=[],this.gui=new s.default.GUI,this.eventBus=new a.default,this.clock=new i.Clock,this.scene=new i.Scene,this.scene.background=new i.Color(o.background),this.renderer=new i.WebGLRenderer(c),this.renderer.setSize(this.width,this.height),this.camera=new r.default(this),document.body.appendChild(this.renderer.domElement)}return o(e,[{key:"setCamera",value:function(e){this.camera=e,this.camera.updateProjectionMatrix()}},{key:"updateEntities",value:function(){for(var e=0;e<this.entities.length;e++)this.entities[e].update()}},{key:"update",value:function(){this.updateEntities(),this.renderer.render(this.scene,this.camera.getCamera())}},{key:"addEntity",value:function(e){this.entities.push(e)}},{key:"onWindowResize",value:function(){this.width=window.innerWidth,this.height=window.innerHeight,this.camera.getCamera().aspect=this.width/this.height,this.camera.getCamera().updateProjectionMatrix(),this.renderer.setSize(this.width,this.height)}},{key:"canvas",get:function(){return this.renderer.domElement}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),a=n(1),s=(o=a)&&o.__esModule?o:{default:o};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),i(t,[{key:"setup",value:function(){this.intensity=1,this.mesh=new r.PointLight(16777215,this.intensity),this.mesh.position.set(1,1,1),this.setupGUI()}},{key:"update",value:function(){}},{key:"setupGUI",value:function(){this.gui.light=this.gui.addFolder("Light"),this.gui.light.add(this.mesh,"intensity"),this.gui.light.transform=this.gui.light.addFolder("Transform"),this.gui.light.transform.add(this.mesh.position,"x"),this.gui.light.transform.add(this.mesh.position,"y"),this.gui.light.transform.add(this.mesh.position,"z")}},{key:"setupHelpers",value:function(){this.lighthelper=new r.PointLightHelper(this.mesh,.1),this.scene.add(this.lighthelper)}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));t.default=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=new o.Geometry,a=2*Math.PI,s=1.5707963267948966,u=[],c=0;c<=n/4;c++)for(var l=0;l<=n;l++){var h=l*a/n,d=-s+Math.PI*c/(n/2),f=new o.Vector3,p=new o.Vector3;f.x=e*Math.cos(d)*Math.cos(h),f.y=e*Math.cos(d)*Math.sin(h),f.z=e*Math.sin(d),f.z-=t/2,p.x=f.x,p.y=f.y,p.z=f.z,r.vertices.push(f),u.push(p)}for(var m=0;m<i;m++)for(var b=0;b<=n;b++){var v=b*a/n,g=-s+Math.PI*(n/4)/(n/2),y=new o.Vector3,w=new o.Vector3;y.x=e*Math.cos(g)*Math.cos(v),y.y=e*Math.cos(g)*Math.sin(v),y.z=e*Math.sin(g),y.z+=-t/2+m*(t/i),w.x=y.x,w.y=y.y,w.z=y.z,r.vertices.push(y),u.push(w)}for(var O=n/4;O<=n/2;O++)for(var P=0;P<=n;P++){var E=P*a/n,k=-s+Math.PI*O/(n/2),_=new o.Vector3,j=new o.Vector3;_.x=e*Math.cos(k)*Math.cos(E),_.y=e*Math.cos(k)*Math.sin(E),_.z=e*Math.sin(k),_.z+=t/2,j.x=_.x,j.y=_.y,j.z=_.z,r.vertices.push(_),u.push(j)}for(var M=0;M<=n/2+i;M++)for(var C=0;C<n;C++){var T=new o.Vector4(M*(n+1)+C,M*(n+1)+(C+1),(M+1)*(n+1)+(C+1),(M+1)*(n+1)+C);if(M==n/4){var x=new o.Face3(T.x,T.y,T.z,[u[T.x],u[T.y],u[T.z]]),S=new o.Face3(T.x,T.z,T.w,[u[T.x],u[T.z],u[T.w]]);r.faces.push(S),r.faces.push(x)}else{var z=new o.Face3(T.x,T.y,T.z,[u[T.x],u[T.y],u[T.z]]),R=new o.Face3(T.x,T.z,T.w,[u[T.x],u[T.z],u[T.w]]);r.faces.push(z),r.faces.push(R)}}return r.computeFaceNormals(),r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),r=s(n(1)),a=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),o(t,[{key:"setup",value:function(){this.radius=1,this.height=2,this.N=16,this.middleSegments=5,this.geometry=new a.default(this.radius,this.height,this.N,this.middleSegments),this.material=new i.MeshNormalMaterial({wireframe:!1,side:i.DoubleSide}),this.mesh=new i.Mesh(this.geometry,this.material)}},{key:"update",value:function(){}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),r=s(n(1)),a=s(n(6));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),o(t,[{key:"setup",value:function(){this.resolution=14,this.scale=.4,this.gridspace=.7,this.wireframe=!1,this.modulation={speed:.1,depth:0},this.group=new i.Group,this.capsules=[],this.generateGrid(),this.group.scale.set(this.scale,this.scale,this.scale),this.scene.add(this.group),this.setupGUI()}},{key:"generateGrid",value:function(){this.capsules=[];for(var e=0;e<this.resolution;e++)for(var t=0;t<this.resolution;t++){var n=new a.default(this.manager),o=this.scale/(this.resolution-1);n.mesh.scale.set(o/2,o/2,o/2),n.mesh.position.x=(o*e-this.scale/2)*(1+this.gridspace),n.mesh.position.y=(o*t-this.scale/2)*(1+this.gridspace),n.mesh.rotation.z=Math.PI/2,this.group.add(n.mesh),this.capsules.push(n)}}},{key:"setupGUI",value:function(){var e=this;this.gui.grid=this.gui.addFolder("Capsule Grid"),this.gui.grid.add(this,"scale",0,10).onChange(function(){e.group.scale.set(e.scale,e.scale,e.scale)}),this.gui.grid.add(this,"resolution",0,20).step(1).onChange(function(){for(var t=0;t<e.capsules.length;t++)e.group.remove(e.capsules[t].mesh);e.generateGrid()}),this.gui.grid.add(this,"gridspace",0,5).onChange(function(){for(var t=0,n=0;t<e.resolution;t++)for(var o=0;o<e.resolution;o++,n++){var i=e.scale/(e.resolution-1);e.capsules[n].mesh.position.x=(i*t-e.scale/2)*(1+e.gridspace),e.capsules[n].mesh.position.y=(i*o-e.scale/2)*(1+e.gridspace)}}),this.gui.grid.add(this.modulation,"speed"),this.gui.grid.add(this.modulation,"depth"),this.gui.grid.open()}},{key:"update",value:function(){var e=Math.PI/2*Math.sin(this.clock.getElapsedTime());this.group.rotation.z=e;for(var t=0,n=0;t<this.resolution;t++)for(var o=0;o<this.resolution;o++,n++)this.capsules[n].mesh.position.z=Math.sin(this.clock.getElapsedTime()*this.modulation.speed+t*o)*this.modulation.depth;var i=Math.sin(this.clock.getElapsedTime()*this.modulation.speed)*this.modulation.depth;this.group.position.z=i}}]),t}();t.default=u},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),a=n(8),s=(o=a)&&o.__esModule?o:{default:o};var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.template=t,this.options=n,this.showStats=!!this.options.stats,this.showGrid=!!this.options.grid,this.showStats&&this.assembleStats(),this.showGrid&&this.assembleGrid(),this.gui=this.template.gui,this.setupGUI()}return i(e,[{key:"setupGUI",value:function(){var e=this;this.gui.debug=this.gui.addFolder("Debug"),this.gui.debug.add(this,"showStats").onChange(function(t){t?e.assembleStats():e.stats.domElement.style.display="hidden"}),this.gui.debug.add(this,"showGrid").onChange(function(t){t?e.assembleGrid():e.template.scene.remove(e.grid.helper)})}},{key:"assembleStats",value:function(){this.stats=new s.default,this.stats.domElement.style.position="absolute",this.stats.domElement.style.left="0px",this.stats.domElement.style.bottom="0px",this.stats.domElement.style.display="visible",document.body.appendChild(this.stats.domElement)}},{key:"assembleGrid",value:function(){this.grid=new Object,this.grid.size=this.options.grid.size||10,this.grid.divisions=this.options.grid.divisions||10,this.grid.helper=new r.GridHelper(this.grid.size,this.grid.divisions),this.template.scene.add(this.grid.helper)}}]),e}();t.default=u},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(15),a=(o=r)&&o.__esModule?o:{default:o};var s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.capturer=new a.default(n),this.gui=t.gui.addFolder("Capture"),this.setup()}return i(e,[{key:"capture",value:function(e){this.capturer.capture(e)}},{key:"setup",value:function(){this.gui.add(this.capturer,"start"),this.gui.add(this.capturer,"stop"),this.gui.add(this.capturer,"save")}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.vert="\nvarying vec2 vUv;\n\nvoid main()\t{\n    vUv = uv;\n    gl_Position = vec4( position, 1.0 );\n}\n",t.frag="\nuniform sampler2D tex0;\nuniform sampler2D tex1;\nvarying vec2 vUv;\n\nuniform float feedback;\nuniform float scale;\n\nuniform vec2 vPoint;\n\nvoid main(){\n\n    vec4 color;\n\n    vec2 uv = vUv;\n    vec2 uv2 = uv;\n\n    uv2 -= vPoint;\n    uv2 += vPoint/scale;\n    uv2 *= scale;\n\n    vec4 current = texture2D(tex1, uv);\n    vec4 fb = texture2D(tex0, uv2);\n\n    // color = mix(current,fb,feedback);\n    if(current.a == 0.0){\n      color = fb * feedback;\n    }else{\n      color = current;\n    }\n\n    gl_FragColor = color;\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=c(n(0)),a=n(3),s=(o=a)&&o.__esModule?o:{default:o},u=c(n(17));function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.scene.background=null,n.renderer.setClearColor(0,0);var o=function(){n.feedbackScene=new r.Scene,n.feedbackUniforms={tex0:{value:n.interTarget.texture},tex1:{value:n.mainTarget.texture},feedback:{value:1},scale:{value:1.02},vPoint:{value:[.5,.5]}},n.gui.feedback=n.gui.addFolder("Feedback Shader"),n.gui.feedback.add(n.feedbackUniforms.feedback,"value",0,1).name("Amount"),n.gui.feedback.add(n.feedbackUniforms.scale,"value",.8,1.2).name("Scale").step(.001),n.gui.feedback.open();var e=new r.PlaneBufferGeometry(2,2),t=new r.ShaderMaterial({uniforms:n.feedbackUniforms,vertexShader:u.vert,fragmentShader:u.frag,transparent:!0}),o=new r.Mesh(e,t);n.feedbackScene.add(o)},i=function(){n.outputScene=new r.Scene,n.outputScene.background=new r.Color(0);var e=new r.PlaneBufferGeometry(n.width,n.height),t=new r.MeshBasicMaterial({map:n.outputTarget.texture,transparent:!0});n.outputQuad=new r.Mesh(e,t),n.outputScene.add(n.outputQuad)};return n.orthoCamera=new r.OrthographicCamera(n.width/-2,n.width/2,n.height/2,n.height/-2,1,1e3),n.orthoCamera.position.z=1,n.mainTarget=new r.WebGLRenderTarget(n.width,n.height,{format:r.RGBAFormat}),n.interTarget=new r.WebGLRenderTarget(n.width,n.height,{format:r.RGBAFormat}),n.outputTarget=new r.WebGLRenderTarget(n.width,n.height,{format:r.RGBAFormat}),o(),i(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),i(t,[{key:"update",value:function(){this.updateEntities(),this.camera.update(),this.renderer.render(this.scene,this.camera.getCamera(),this.mainTarget),this.renderer.render(this.feedbackScene,this.orthoCamera,this.outputTarget);var e=this.interTarget;this.interTarget=this.outputTarget,this.outputTarget=e,this.feedbackUniforms.tex0.value=this.interTarget.texture,this.outputQuad.material.map=this.outputTarget.texture,this.renderer.render(this.outputScene,this.orthoCamera)}}]),t}();t.default=l},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventCallbacksPairs=[]}return o(e,[{key:"subscribe",value:function(e,t){this.eventCallbacksPair=this.findEventCallbacksPair(e),this.eventCallbacksPair?this.eventCallbacksPair.callbacks.push(t):this.eventCallbacksPairs.push(new function(e,t){this.eventType=e,this.callbacks=[t]}(e,t))}},{key:"publish",value:function(e,t,n){this.eventCallbacksPair=this.findEventCallbacksPair(e),this.eventCallbacksPair?this.eventCallbacksPair.callbacks.forEach(function(e){return e(t,n)}):console.error("no subscribers for event "+e)}},{key:"findEventCallbacksPair",value:function(e){return this.eventCallbacksPairs.find(function(t){return t.eventType===e})}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));t.default=o.OrbitControls=function(e,t){var n,i,r,a,s;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new o.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.panningMode=o.ScreenSpacePanning,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:o.MOUSE.LEFT,ZOOM:o.MOUSE.MIDDLE,PAN:o.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return m.phi},this.getAzimuthalAngle=function(){return m.theta},this.saveState=function(){u.target0.copy(u.target),u.position0.copy(u.object.position),u.zoom0=u.object.zoom},this.reset=function(){u.target.copy(u.target0),u.object.position.copy(u.position0),u.object.zoom=u.zoom0,u.object.updateProjectionMatrix(),u.dispatchEvent(c),u.update(),f=d.NONE},this.update=(n=new o.Vector3,i=(new o.Quaternion).setFromUnitVectors(e.up,new o.Vector3(0,1,0)),r=i.clone().inverse(),a=new o.Vector3,s=new o.Quaternion,function(){var e=u.object.position;return n.copy(e).sub(u.target),n.applyQuaternion(i),m.setFromVector3(n),u.autoRotate&&f===d.NONE&&x(2*Math.PI/60/60*u.autoRotateSpeed),m.theta+=b.theta,m.phi+=b.phi,m.theta=Math.max(u.minAzimuthAngle,Math.min(u.maxAzimuthAngle,m.theta)),m.phi=Math.max(u.minPolarAngle,Math.min(u.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=v,m.radius=Math.max(u.minDistance,Math.min(u.maxDistance,m.radius)),u.target.add(g),n.setFromSpherical(m),n.applyQuaternion(r),e.copy(u.target).add(n),u.object.lookAt(u.target),!0===u.enableDamping?(b.theta*=1-u.dampingFactor,b.phi*=1-u.dampingFactor,g.multiplyScalar(1-u.dampingFactor)):(b.set(0,0,0),g.set(0,0,0)),v=1,!!(y||a.distanceToSquared(u.object.position)>p||8*(1-s.dot(u.object.quaternion))>p)&&(u.dispatchEvent(c),a.copy(u.object.position),s.copy(u.object.quaternion),y=!1,!0)}),this.dispose=function(){u.domElement.removeEventListener("contextmenu",B,!1),u.domElement.removeEventListener("mousedown",A,!1),u.domElement.removeEventListener("wheel",D,!1),u.domElement.removeEventListener("touchstart",I,!1),u.domElement.removeEventListener("touchend",Y,!1),u.domElement.removeEventListener("touchmove",Z,!1),document.removeEventListener("mousemove",G,!1),document.removeEventListener("mouseup",H,!1),window.removeEventListener("keydown",V,!1)};var u=this,c={type:"change"},l={type:"start"},h={type:"end"},d={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},f=d.NONE,p=1e-6,m=new o.Spherical,b=new o.Spherical,v=1,g=new o.Vector3,y=!1,w=new o.Vector2,O=new o.Vector2,P=new o.Vector2,E=new o.Vector2,k=new o.Vector2,_=new o.Vector2,j=new o.Vector2,M=new o.Vector2,C=new o.Vector2;function T(){return Math.pow(.95,u.zoomSpeed)}function x(e){b.theta-=e}function S(e){b.phi-=e}var z,R=(z=new o.Vector3,function(e,t){z.setFromMatrixColumn(t,0),z.multiplyScalar(-e),g.add(z)}),L=function(){var e=new o.Vector3;return function(t,n){switch(u.panningMode){case o.ScreenSpacePanning:e.setFromMatrixColumn(n,1);break;case o.HorizontalPanning:e.setFromMatrixColumn(n,0),e.crossVectors(u.object.up,e)}e.multiplyScalar(t),g.add(e)}}(),U=function(){var e=new o.Vector3;return function(t,n){var o=u.domElement===document?u.domElement.body:u.domElement;if(u.object.isPerspectiveCamera){var i=u.object.position;e.copy(i).sub(u.target);var r=e.length();r*=Math.tan(u.object.fov/2*Math.PI/180),R(2*t*r/o.clientHeight,u.object.matrix),L(2*n*r/o.clientHeight,u.object.matrix)}else u.object.isOrthographicCamera?(R(t*(u.object.right-u.object.left)/u.object.zoom/o.clientWidth,u.object.matrix),L(n*(u.object.top-u.object.bottom)/u.object.zoom/o.clientHeight,u.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),u.enablePan=!1)}}();function F(e){u.object.isPerspectiveCamera?v/=e:u.object.isOrthographicCamera?(u.object.zoom=Math.max(u.minZoom,Math.min(u.maxZoom,u.object.zoom*e)),u.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),u.enableZoom=!1)}function N(e){u.object.isPerspectiveCamera?v*=e:u.object.isOrthographicCamera?(u.object.zoom=Math.max(u.minZoom,Math.min(u.maxZoom,u.object.zoom/e)),u.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),u.enableZoom=!1)}function A(e){if(!1!==u.enabled){switch(e.preventDefault(),e.button){case u.mouseButtons.ORBIT:if(!1===u.enableRotate)return;!function(e){w.set(e.clientX,e.clientY)}(e),f=d.ROTATE;break;case u.mouseButtons.ZOOM:if(!1===u.enableZoom)return;!function(e){j.set(e.clientX,e.clientY)}(e),f=d.DOLLY;break;case u.mouseButtons.PAN:if(!1===u.enablePan)return;!function(e){E.set(e.clientX,e.clientY)}(e),f=d.PAN}f!==d.NONE&&(document.addEventListener("mousemove",G,!1),document.addEventListener("mouseup",H,!1),u.dispatchEvent(l))}}function G(e){if(!1!==u.enabled)switch(e.preventDefault(),f){case d.ROTATE:if(!1===u.enableRotate)return;!function(e){O.set(e.clientX,e.clientY),P.subVectors(O,w).multiplyScalar(u.rotateSpeed);var t=u.domElement===document?u.domElement.body:u.domElement;x(2*Math.PI*P.x/t.clientWidth),S(2*Math.PI*P.y/t.clientHeight),w.copy(O),u.update()}(e);break;case d.DOLLY:if(!1===u.enableZoom)return;!function(e){M.set(e.clientX,e.clientY),C.subVectors(M,j),C.y>0?F(T()):C.y<0&&N(T()),j.copy(M),u.update()}(e);break;case d.PAN:if(!1===u.enablePan)return;!function(e){k.set(e.clientX,e.clientY),_.subVectors(k,E).multiplyScalar(u.panSpeed),U(_.x,_.y),E.copy(k),u.update()}(e)}}function H(e){!1!==u.enabled&&(document.removeEventListener("mousemove",G,!1),document.removeEventListener("mouseup",H,!1),u.dispatchEvent(h),f=d.NONE)}function D(e){!1===u.enabled||!1===u.enableZoom||f!==d.NONE&&f!==d.ROTATE||(e.preventDefault(),e.stopPropagation(),u.dispatchEvent(l),function(e){e.deltaY<0?N(T()):e.deltaY>0&&F(T()),u.update()}(e),u.dispatchEvent(h))}function V(e){!1!==u.enabled&&!1!==u.enableKeys&&!1!==u.enablePan&&function(e){switch(e.keyCode){case u.keys.UP:U(0,u.keyPanSpeed),u.update();break;case u.keys.BOTTOM:U(0,-u.keyPanSpeed),u.update();break;case u.keys.LEFT:U(u.keyPanSpeed,0),u.update();break;case u.keys.RIGHT:U(-u.keyPanSpeed,0),u.update()}}(e)}function I(e){if(!1!==u.enabled){switch(e.touches.length){case 1:if(!1===u.enableRotate)return;!function(e){w.set(e.touches[0].pageX,e.touches[0].pageY)}(e),f=d.TOUCH_ROTATE;break;case 2:if(!1===u.enableZoom)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);j.set(0,o)}(e),f=d.TOUCH_DOLLY;break;case 3:if(!1===u.enablePan)return;!function(e){E.set(e.touches[0].pageX,e.touches[0].pageY)}(e),f=d.TOUCH_PAN;break;default:f=d.NONE}f!==d.NONE&&u.dispatchEvent(l)}}function Z(e){if(!1!==u.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===u.enableRotate)return;if(f!==d.TOUCH_ROTATE)return;!function(e){O.set(e.touches[0].pageX,e.touches[0].pageY),P.subVectors(O,w).multiplyScalar(u.rotateSpeed);var t=u.domElement===document?u.domElement.body:u.domElement;x(2*Math.PI*P.x/t.clientWidth),S(2*Math.PI*P.y/t.clientHeight),w.copy(O),u.update()}(e);break;case 2:if(!1===u.enableZoom)return;if(f!==d.TOUCH_DOLLY)return;!function(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);M.set(0,o),C.subVectors(M,j),C.y>0?N(T()):C.y<0&&F(T()),j.copy(M),u.update()}(e);break;case 3:if(!1===u.enablePan)return;if(f!==d.TOUCH_PAN)return;!function(e){k.set(e.touches[0].pageX,e.touches[0].pageY),_.subVectors(k,E).multiplyScalar(u.panSpeed),U(_.x,_.y),E.copy(k),u.update()}(e);break;default:f=d.NONE}}function Y(e){!1!==u.enabled&&(u.dispatchEvent(h),f=d.NONE)}function B(e){!1!==u.enabled&&e.preventDefault()}u.domElement.addEventListener("contextmenu",B,!1),u.domElement.addEventListener("mousedown",A,!1),u.domElement.addEventListener("wheel",D,!1),u.domElement.addEventListener("touchstart",I,!1),u.domElement.addEventListener("touchend",Y,!1),u.domElement.addEventListener("touchmove",Z,!1),window.addEventListener("keydown",V,!1),this.update()},o.OrbitControls.prototype=Object.create(o.EventDispatcher.prototype),o.OrbitControls.prototype.constructor=o.OrbitControls,Object.defineProperties(o.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}}),o.ScreenSpacePanning=0,o.HorizontalPanning=1},function(e,t,n){"use strict";(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e})(n(0)),u(n(3));var o=u(n(18)),i=u(n(16)),r=u(n(9)),a=u(n(7)),s=(u(n(2)),u(n(4)));function u(e){return e&&e.__esModule?e:{default:e}}var c=void 0,l=void 0,h=void 0;c=new o.default,new a.default(c),new s.default(c),l=new r.default(c,{stats:!0,grid:!1}),h=new i.default(c,{verbose:!1,display:!0,framerate:100,format:"png",workersPath:"js/utils/"}),window.addEventListener("resize",c.onWindowResize.bind(c),!1),function e(){requestAnimationFrame(e),l.stats.begin(),c.update(),l.stats.end(),h.capture(c.canvas)}()}]);